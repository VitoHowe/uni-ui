"use strict";const e=require("../utils/request.js"),o=require("../utils/constants.js"),t=e=>({id:e.id,name:e.name,description:e.description,language:e.language,totalWords:e.total_words,creatorId:e.created_by,createdAt:e.created_at,updatedAt:e.updated_at,source:{filename:e.source_filename,storedPath:e.stored_path,size:e.source_size}});exports.fetchWordBookWords=async a=>{var i;if(!a)throw new Error("bookId is required to load words");const n=await e.get(o.API_ENDPOINTS.WORD_BOOKS.WORDS(a)),r=(null==(i=null==n?void 0:n.book)?void 0:i.name)||"",l=((null==n?void 0:n.words)||[]).map((e=>((e,o,t)=>{var a,i;const n=t.word||(null==(a=t.extra)?void 0:a.english)||"",r=t.translation||(null==(i=t.extra)?void 0:i.chinese)||"";return{id:t.id??`${e}-${t.order_index}`,bookId:e,bookName:o,english:n,chinese:r,phonetic:t.phonetic||"",definition:t.definition||"",example:t.example_sentence||"",partOfSpeech:t.part_of_speech||"",tags:t.tags||[],order:t.order_index??0,raw:t}})(a,r,e)));return{book:t((null==n?void 0:n.book)||{id:a,name:r}),words:l,total:(null==n?void 0:n.total)??l.length}},exports.fetchWordBooks=async(a={})=>{var i;const n=await e.get(o.API_ENDPOINTS.WORD_BOOKS.LIST,a),r=((null==n?void 0:n.books)||[]).map(t);return{books:r,total:(null==n?void 0:n.total)??r.length,pagination:(null==n?void 0:n.pagination)||{page:a.page||1,limit:a.limit||r.length||10,total:(null==n?void 0:n.total)??r.length,totalPages:(null==(i=null==n?void 0:n.pagination)?void 0:i.totalPages)||1}}};
