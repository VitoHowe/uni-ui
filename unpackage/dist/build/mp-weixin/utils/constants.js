"use strict";const e=require("../common/vendor.js"),E=()=>"undefined"!=typeof process&&process.env?process.env:{},_=e=>{if(!e)return{};if("object"==typeof e)return e;if("string"!=typeof e)return{};try{const E=JSON.parse(e);return E&&"object"==typeof E?E:{}}catch(E){return{}}},R=(e="")=>e?e.replace(/\/+$/,""):"",o=(()=>{if("undefined"!=typeof __DEV__)return __DEV__?"development":"production";const _=E().NODE_ENV||"";return"production"===_?"production":"development"===_?"development":void 0!==e.wx$1?"production":"development"})(),s=(()=>{const e=E(),o="undefined"==typeof process?{}:{..._(process.UNI_SCRIPT_ENV),..._(E().UNI_CUSTOM_DEFINE)},s=e.UNI_API_BASE_URL||e.VITE_API_BASE_URL||e.API_BASE_URL||o.UNI_API_BASE_URL||o.VITE_API_BASE_URL||o.API_BASE_URL;return R(s)})(),t=o,S=R({development:{BASE_URL:"http://127.0.0.1:3001/api"},production:{BASE_URL:"https://wxnode.mayday.qzz.io/api"}}[t].BASE_URL),r=s||S,n=s?"env":`default:${t}`;s||console.log(`[API_CONFIG] 未配置 UNI_API_BASE_URL，使用 ${t} 默认地址: ${r}`),"production"!==o||s||console.warn("[API_CONFIG] 当前 NODE_ENV=production，但未配置 UNI_API_BASE_URL，已回退到 production 默认地址");const O={BASE_URL:r,ENV:o,BASE_URL_SOURCE:n,TIMEOUT:1e4,TOKEN_REFRESH_THRESHOLD:3e5,MAX_RETRY_COUNT:3};exports.API_CONFIG=O,exports.API_ENDPOINTS={AUTH:{LOGIN:"/auth/login",REFRESH:"/auth/refresh",PROFILE:"/auth/profile",LOGOUT:"/auth/logout"},WORD_BOOKS:{LIST:"/word-books",WORDS:e=>`/word-books/${e}/words`},QUESTIONS:{BANKS:"/questions/banks",BANK_DETAIL:"/questions/banks"},SUBJECTS:{LIST:"/subjects",BANKS:e=>`/subjects/${e}/banks`,CHAPTERS:e=>`/subjects/${e}/chapters`},ESSAYS:{SUBJECT_ORGS:e=>`/subjects/${e}/essay-orgs`,SUBJECT_LIST:e=>`/subjects/${e}/essays`,SUBJECT_CHAPTER_LIST:(e,E)=>`/subjects/${e}/chapters/${E}/essays`,DETAIL:e=>`/essays/${e}`},FILES:{UPLOAD:"/files/upload"}},exports.ERROR_TYPES={NETWORK_ERROR:"NETWORK_ERROR",TIMEOUT_ERROR:"TIMEOUT_ERROR",AUTH_ERROR:"AUTH_ERROR",BUSINESS_ERROR:"BUSINESS_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},exports.HTTP_STATUS={OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,INTERNAL_SERVER_ERROR:500},exports.STORAGE_KEYS={ACCESS_TOKEN:"access_token",REFRESH_TOKEN:"refresh_token",USER_INFO:"user_info",LOGIN_STATE:"login_state",TOKEN_EXPIRES_AT:"token_expires_at",SELECTED_SUBJECT:"selected_subject"};
