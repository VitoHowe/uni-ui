"use strict";const e=require("../common/vendor.js"),t=require("../stores/auth.js"),o=require("../utils/auth.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const s={__name:"AuthGuard",props:{title:{type:String,default:"需要登录"},message:{type:String,default:"请登录后查看完整功能"},showGuestOption:{type:Boolean,default:!1},showPreview:{type:Boolean,default:!1},currentPath:{type:String,default:""},autoRedirect:{type:Boolean,default:!1}},emits:["guestAccess"],setup(s,{emit:r}){const a=s,u=r,n=t.useAuthStore(),i=e.computed((()=>a.autoRedirect&&!n.isAuthenticated)),c=()=>{if(a.currentPath)o.RouteGuard.saveReturnPath(a.currentPath);else{const e=getCurrentPages();if(e.length>0){const t=`/${e[e.length-1].route}`;o.RouteGuard.saveReturnPath(t)}}e.index.navigateTo({url:"/pages/login/login"})},p=()=>{u("guestAccess")};return i.value&&c(),(t,o)=>e.e({a:e.unref(n).isAuthenticated},e.unref(n).isAuthenticated?{}:e.e({b:e.p({type:"locked",size:"48",color:"#007AFF"}),c:e.t(s.title||"需要登录"),d:e.t(s.message||"请登录后查看完整功能"),e:e.p({type:"person",size:"18",color:"#fff"}),f:e.o(c),g:s.showGuestOption},s.showGuestOption?{h:e.o(p)}:{},{i:s.showPreview},s.showPreview?{j:e.p({type:"checkmarkempty",size:"16",color:"#28a745"}),k:e.p({type:"checkmarkempty",size:"16",color:"#28a745"}),l:e.p({type:"checkmarkempty",size:"16",color:"#28a745"})}:{}))}},r=e._export_sfc(s,[["__scopeId","data-v-d3e2e7b7"]]);wx.createComponent(r);
