"use strict";const e=require("../common/vendor.js"),t=require("../utils/auth.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const a={__name:"CustomTabBar",props:{current:{type:Number,default:0}},emits:["change"],setup(a,{expose:o,emit:n}){const r=a,u=n,i=e.ref(r.current),s=[{pagePath:"/pages/index/index",iconType:"home",text:"首页"},{pagePath:"/pages/study/study",iconType:"medal",text:"学习"},{pagePath:"/pkg-exam/pages/question/question",iconType:"help",text:"题库"},{pagePath:"/pages/profile/profile",iconType:"person",text:"我的"}];return e.onMounted((()=>{i.value=r.current})),o({setCurrentIndex:e=>{i.value=e}}),(a,o)=>({a:e.f(s,((a,o,n)=>({a:"960a925e-0-"+n,b:e.p({type:a.iconType,size:24,color:i.value===o?"#007AFF":"#999999"}),c:e.t(a.text),d:i.value===o?"#007AFF":"#999999",e:o,f:i.value===o?1:"",g:e.o((n=>((a,o)=>{if(i.value===o)return;const n=i.value;if(t.RouteGuard.isProtectedRoute(a.pagePath)&&!t.LoginStateManager.getLoginState())return console.log("❌ Tab切换需要登录权限:",a.pagePath),t.RouteGuard.saveReturnPath(a.pagePath),void e.index.showModal({title:"需要登录",content:"访问此页面需要登录，是否立即登录？",confirmText:"立即登录",cancelText:"稍后再说",success:t=>{t.confirm&&e.index.navigateTo({url:"/pages/login/login"})}});i.value=o,u("change",o),e.index.reLaunch({url:a.pagePath,fail:t=>{console.error("❌ Tab 页面跳转失败:",a.pagePath,t),i.value=n,u("change",n),e.index.showToast({title:"页面跳转失败",icon:"error"})}})})(a,o)),o)})))})}},o=e._export_sfc(a,[["__scopeId","data-v-960a925e"]]);wx.createComponent(o);
