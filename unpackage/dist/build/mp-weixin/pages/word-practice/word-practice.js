"use strict";const e=require("../../common/vendor.js"),o=require("../../stores/wordPractice.js");if(!Array){e.resolveComponent("uni-icons")()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+t)();const t=()=>"../../components/word-practice/WordBookSelector.js",a={__name:"word-practice",setup(t){const a=o.useWordPracticeStore(),n=e.ref(!1),s=e.computed((()=>a.currentProgress)),l=e.computed((()=>[{label:"词书",value:a.books.length},{label:"收藏",value:s.value.favorites.length},{label:"错词",value:s.value.mistakes.length}])),r=e.computed((()=>{var e;return(null==(e=a.currentBook)?void 0:e.name)||"未选择"})),d=e.computed((()=>s.value.favorites.length)),u=e.computed((()=>s.value.mistakes.length));e.onMounted((()=>{(async()=>{a.books.length||await a.loadBooks(),!a.selectedBookId&&a.books.length&&await a.selectBook(a.books[0].id,{preloadWords:!1})})()}));const i=()=>{n.value=!0},c=async e=>{e&&(await a.selectBook(e.id,{preloadWords:!1}),n.value=!1)},v=o=>{const t=o||a.selectedBookId;t?e.index.navigateTo({url:`/pages/word-practice/word-detail?bookId=${t}`}):e.index.showToast({title:"请先选择词书",icon:"none"})},k=(e=0)=>e.toLocaleString();return(o,t)=>e.e({a:e.o(i),b:e.f(l.value,((o,t,a)=>({a:e.t(o.value),b:e.t(o.label),c:o.label}))),c:e.t(e.unref(a).books.length),d:e.unref(a).booksLoading},e.unref(a).booksLoading?{}:e.unref(a).books.length?{g:e.f(e.unref(a).books,((o,t,s)=>{return{a:e.t(o.name),b:e.t(k(o.totalWords)),c:e.t(o.description||"暂无简介，立即开启学习。"),d:e.t(o.language||"unk"),e:e.t((l=o.createdAt,l?new Date(l).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}):"刚刚")),f:e.o((t=>(async o=>{await a.selectBook(o.id,{preloadWords:!1}),n.value=!1,e.index.showToast({title:`已切换至 ${o.name}`,icon:"none"})})(o)),o.id),g:e.o((e=>v(o.id)),o.id),h:o.id};var l}))}:{f:e.p({type:"info",size:"32",color:"#94a3b8"})},{e:!e.unref(a).books.length,h:e.t(r.value),i:e.t(d.value),j:e.t(d.value),k:e.t(d.value?"已收藏词条，进入练习可查看详情":"还没有收藏，进入词书即可收藏"),l:e.o((o=>v(e.unref(a).selectedBookId))),m:e.t(u.value),n:e.t(u.value),o:e.t(u.value?"存在待复习词汇，进入词书即可开始复盘":"暂时没有错词，保持学习节奏"),p:e.o((o=>v(e.unref(a).selectedBookId))),q:e.o((e=>n.value=!1)),r:e.o(c),s:e.p({visible:n.value,books:e.unref(a).books,"selected-book-id":e.unref(a).selectedBookId,loading:e.unref(a).booksLoading})})}},n=e._export_sfc(a,[["__scopeId","data-v-dbdab5e9"]]);wx.createPage(n);
