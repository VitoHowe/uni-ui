{"version":3,"file":"exam.js","sources":["pages/exam/exam.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZXhhbS9leGFtLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"exam-container\">\r\n    <!-- é¡¶éƒ¨è¿›åº¦æ  -->\r\n    <view class=\"exam-header\" :style=\"{ paddingTop: statusBarHeight + 'px', height: navBarHeight + 'px' }\">\r\n      <view class=\"header-content\">\r\n        <view class=\"header-info\"\r\n          :style=\"{ maxWidth: (menuButtonInfo.left || 0) > 0 ? (menuButtonInfo.left - 20) + 'px' : 'auto' }\">\r\n          <view class=\"back-btn\" @click=\"handleBack\">\r\n            <uni-icons type=\"back\" size=\"20\" color=\"#333\" />\r\n          </view>\r\n          <view class=\"exam-title\">\r\n            <text class=\"title-text\">{{ titleText }}</text>\r\n            <text class=\"subtitle-text\">{{ subtitleText }}</text>\r\n          </view>\r\n          <!-- ç»Ÿè®¡æŒ‰é’®ç§»åˆ°å·¦ä¾§ï¼Œé¿å…ä¸èƒ¶å›Šé‡å  -->\r\n        </view>\r\n        <view class=\"progress-container\">\n          <view v-if=\"showProgress\" class=\"progress-bar\">\n            <view class=\"progress-fill\" :style=\"{ width: progressPercent + '%' }\"></view>\n          </view>\n          <text v-if=\"showProgress\" class=\"progress-text\">{{ progressPercent }}%</text>\n          <view class=\"stats-btn\" @click=\"showStats\">\n            <uni-icons type=\"bars\" size=\"18\" color=\"#3B82F6\" />\n          </view>\n        </view>\n      </view>\r\n    </view>\n\n    <!-- éšæœºç»ƒä¹ å†å²ç»Ÿè®¡ -->\n    <view v-if=\"showPracticeSummary\" class=\"practice-summary\">\n      <view class=\"summary-card\">\n        <view class=\"summary-item\">\n          <text class=\"summary-number\">{{ practiceSummary.answered_count }}</text>\n          <text class=\"summary-label\">å·²ä½œç­”</text>\n        </view>\n        <view class=\"summary-item\">\n          <text class=\"summary-number\">{{ practiceSummary.accuracy }}%</text>\n          <text class=\"summary-label\">æ­£ç¡®ç‡</text>\n        </view>\n        <view class=\"summary-item\">\n          <text class=\"summary-number\">{{ practiceSummary.wrong_count }}</text>\n          <text class=\"summary-label\">é”™é¢˜æ•°</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- åŠ è½½çŠ¶æ€ -->\n    <view v-if=\"loading\" class=\"loading-state\">\n      <uni-icons type=\"spinner-cycle\" size=\"40\" color=\"#667eea\" class=\"loading-icon\" />\r\n      <text class=\"loading-text\">æ­£åœ¨åŠ è½½é¢˜ç›®...</text>\r\n    </view>\r\n\r\n    <!-- é¢˜ç›®å†…å®¹ -->\r\n    <view v-else-if=\"currentQuestion\" class=\"question-wrapper\">\r\n      <!-- å¯æ»šåŠ¨çš„é¢˜ç›®å†…å®¹åŒºåŸŸ -->\r\n      <view class=\"question-content\">\r\n        <!-- é¢˜ç›®å¡ç‰‡ -->\r\n        <view class=\"question-card\">\r\n          <view class=\"question-header\">\r\n            <view class=\"question-type\" :class=\"'type-' + currentQuestion.type\">\r\n              <text class=\"type-text\">{{ getTypeLabel(currentQuestion.type) }}</text>\r\n            </view>\r\n            <view class=\"question-difficulty\">\r\n              <uni-icons v-for=\"i in 3\" :key=\"i\" type=\"star-filled\" :size=\"14\"\r\n                :color=\"i <= currentQuestion.difficulty ? '#ffc107' : '#ddd'\" />\r\n            </view>\r\n          </view>\r\n\r\n          <view class=\"question-number\">\r\n            <text>é¢˜å· {{ currentQuestionNumber }}</text>\r\n          </view>\r\n\r\n          <view class=\"question-text\" @click=\"handleImageClick\">\r\n            <rich-text :nodes=\"parsedContent\"></rich-text>\r\n          </view>\r\n\r\n          <!-- æ ‡ç­¾ -->\r\n          <view v-if=\"currentQuestion.tags && currentQuestion.tags.length > 0\" class=\"question-tags\">\r\n            <view class=\"tag\" v-for=\"(tag, index) in currentQuestion.tags\" :key=\"index\">\r\n              <text class=\"tag-text\">{{ tag }}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\r\n        <!-- é€‰é¡¹åˆ—è¡¨ -->\r\n        <view class=\"options-list\">\r\n          <view v-for=\"(option, index) in currentQuestion.options\" :key=\"index\" class=\"option-item\" :class=\"{\r\n            'selected': isOptionSelected(index),\r\n            'correct': showAnswer && isCorrectOption(index),\r\n            'wrong': showAnswer && isOptionSelected(index) && !isCorrectOption(index),\r\n            'disabled': showAnswer\r\n          }\" @click=\"selectOption(index)\">\r\n            <view class=\"option-label\">\r\n              <text class=\"label-text\">{{ getOptionLabel(index) }}</text>\r\n            </view>\r\n            <view class=\"option-content\">\r\n              <text class=\"option-text\">{{ option }}</text>\r\n            </view>\r\n            <view class=\"option-icon\">\r\n              <uni-icons v-if=\"showAnswer && isCorrectOption(index)\" type=\"checkmarkempty\" size=\"20\" color=\"#28a745\" />\r\n              <uni-icons v-else-if=\"showAnswer && isOptionSelected(index) && !isCorrectOption(index)\" type=\"closeempty\"\r\n                size=\"20\" color=\"#dc3545\" />\r\n              <view v-else-if=\"isOptionSelected(index)\" class=\"selected-dot\"></view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\r\n        <!-- ç­”æ¡ˆè§£æ -->\r\n        <view v-if=\"showAnswer\" class=\"answer-section\">\r\n          <view class=\"answer-header\">\r\n            <uni-icons type=\"info\" size=\"20\" color=\"#667eea\" />\r\n            <text class=\"answer-title\">ç­”æ¡ˆè§£æ</text>\r\n          </view>\r\n          <view class=\"answer-content\">\r\n            <view class=\"answer-row\">\r\n              <text class=\"answer-label\">æ­£ç¡®ç­”æ¡ˆï¼š</text>\r\n              <text class=\"answer-value correct\">{{ formatAnswer(currentQuestion.answer) }}</text>\r\n            </view>\r\n            <view class=\"answer-row\">\r\n              <text class=\"answer-label\">ä½ çš„ç­”æ¡ˆï¼š</text>\r\n              <text class=\"answer-value\" :class=\"isAnswerCorrect ? 'correct' : 'wrong'\">\r\n                {{ userAnswer || 'æœªä½œç­”' }}\r\n              </text>\r\n            </view>\r\n            <view class=\"explanation\" @click=\"handleImageClick\">\r\n              <text class=\"explanation-label\">è§£æï¼š</text>\r\n              <view class=\"explanation-text\">\r\n                <rich-text v-if=\"currentQuestion.explanation\" :nodes=\"parsedExplanation\"></rich-text>\r\n                <text v-else style=\"color:#999;\">æš‚æ— è§£æ</text>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- å›ºå®šåœ¨åº•éƒ¨çš„æ“ä½œæŒ‰é’® -->\r\n      <view class=\"action-buttons\">\r\n        <button class=\"action-btn secondary\"\r\n          :disabled=\"!hasPrevQuestion && (practiceMode === 'chapter' || !canSwitchToPrevChapter())\"\r\n          @click=\"prevQuestion\">\r\n          <uni-icons type=\"back\" size=\"16\" color=\"#fff\" />\r\n          <text class=\"btn-text\">ä¸Šä¸€é¢˜</text>\r\n        </button>\r\n\r\n        <button v-if=\"!showAnswer\" class=\"action-btn primary show-answer\" @click=\"toggleAnswer\">\r\n          <uni-icons type=\"eye\" size=\"16\" color=\"#fff\" />\r\n          <text class=\"btn-text\">æŸ¥çœ‹ç­”æ¡ˆ</text>\r\n        </button>\r\n        <button v-else class=\"action-btn primary hide-answer\" @click=\"toggleAnswer\">\r\n          <uni-icons type=\"eye-slash\" size=\"16\" color=\"#fff\" />\r\n          <text class=\"btn-text\">æ”¶èµ·</text>\r\n        </button>\r\n\r\n        <button v-if=\"hasNextQuestion || (practiceMode === 'full' && canSwitchToNextChapter())\"\r\n          class=\"action-btn secondary\" @click=\"nextQuestion\">\r\n          <text class=\"btn-text\">ä¸‹ä¸€é¢˜</text>\r\n          <uni-icons type=\"forward\" size=\"16\" color=\"#fff\" />\r\n        </button>\r\n        <button v-else class=\"action-btn finish\" @click=\"finishExam\">\r\n          <uni-icons type=\"checkmarkempty\" size=\"16\" color=\"#fff\" />\r\n          <text class=\"btn-text\">å®Œæˆ</text>\r\n        </button>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- ç»Ÿè®¡å¼¹çª— -->\r\n    <uni-popup ref=\"statsPopup\" type=\"center\">\r\n      <view class=\"stats-popup\">\r\n        <view class=\"popup-header\">\r\n          <text class=\"popup-title\">ç­”é¢˜ç»Ÿè®¡</text>\r\n          <view class=\"close-btn\" @click=\"closeStats\">\r\n            <uni-icons type=\"closeempty\" size=\"20\" color=\"#999\" />\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"stats-content\">\r\n          <view class=\"stat-row\">\r\n            <view class=\"stat-item\">\r\n              <text class=\"stat-number primary\">{{ answeredCount }}</text>\r\n              <text class=\"stat-label\">å·²ç­”é¢˜</text>\r\n            </view>\r\n            <view class=\"stat-item\">\r\n              <text class=\"stat-number success\">{{ correctCount }}</text>\r\n              <text class=\"stat-label\">æ­£ç¡®æ•°</text>\r\n            </view>\r\n            <view class=\"stat-item\">\r\n              <text class=\"stat-number danger\">{{ wrongCount }}</text>\r\n              <text class=\"stat-label\">é”™è¯¯æ•°</text>\r\n            </view>\r\n          </view>\r\n\r\n          <view class=\"accuracy-row\">\r\n            <text class=\"accuracy-label\">æ­£ç¡®ç‡</text>\r\n            <text class=\"accuracy-value\">{{ accuracy }}%</text>\r\n          </view>\r\n\r\n          <view class=\"stats-note\">\n            <text class=\"note-text\">æç¤ºï¼šç»Ÿè®¡æ•°æ®åŸºäºæœ¬æ¬¡ä¼šè¯ç­”é¢˜æƒ…å†µ</text>\n          </view>\n        </view>\r\n\r\n        <view class=\"popup-buttons\">\r\n          <button class=\"popup-btn secondary\" @click=\"resetProgress\">é‡æ–°ç»ƒä¹ </button>\r\n          <button class=\"popup-btn primary\" @click=\"closeStats\">ç»§ç»­ç»ƒä¹ </button>\r\n        </view>\r\n      </view>\r\n    </uni-popup>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, onUnmounted, watch } from 'vue'\r\nimport { get, post, del } from '@/utils/request.js'\r\nimport { parseQuestionImages, extractAllQuestionImages } from '@/utils/imageParser.js'\r\nimport { API_CONFIG } from '@/utils/constants.js'\n\r\n// èƒ¶å›ŠæŒ‰é’®å’ŒçŠ¶æ€æ ä¿¡æ¯\r\nconst menuButtonInfo = ref({})\r\nconst statusBarHeight = ref(0)\r\nconst navBarHeight = ref(0)\r\n\r\n// é¡µé¢å‚æ•°\r\nconst bankId = ref(0)\nconst practiceMode = ref('full') // 'chapter' | 'full' | 'special' | 'random' | 'real'\nconst startChapterId = ref(null)\nconst startQuestionNumber = ref(1)\nconst subjectId = ref(0)\nconst subjectChapterId = ref(0)\nconst subjectName = ref('')\nconst chapterName = ref('')\nconst paperId = ref(0)\nconst paperName = ref('')\n\r\n// é¢˜åº“ä¿¡æ¯\r\nconst bankInfo = ref({\r\n  bank_name: '',\r\n  total_questions: 0\r\n})\r\n\r\n// ç« èŠ‚æ•°æ®\r\nconst chapters = ref([]) // æ‰€æœ‰ç« èŠ‚åˆ—è¡¨\r\nconst currentChapterIndex = ref(0) // å½“å‰ç« èŠ‚ç´¢å¼•\r\nconst currentChapter = ref(null) // å½“å‰ç« èŠ‚å¯¹è±¡\r\n\r\n// å½“å‰é¢˜ç›®\r\nconst currentQuestionNumber = ref(1) // å½“å‰é¢˜å·ï¼ˆç« èŠ‚å†…ï¼Œä»1å¼€å§‹ï¼‰\r\nconst currentQuestion = ref(null) // å½“å‰é¢˜ç›®å¯¹è±¡\r\nconst totalInChapter = ref(0) // å½“å‰ç« èŠ‚æ€»é¢˜æ•°\r\nconst hasNextQuestion = ref(true) // æ˜¯å¦æœ‰ä¸‹ä¸€é¢˜\r\nconst hasPrevQuestion = ref(true) // æ˜¯å¦æœ‰ä¸Šä¸€é¢˜\r\n\r\n// ç­”é¢˜æ•°æ®\r\nconst userAnswers = ref({}) // {chapterId_questionNumber: answer}\nconst showAnswer = ref(false)\nconst questionCache = ref({}) // é¢˜ç›®ç¼“å­˜ {chapterId_questionNumber: question}\nconst randomQuestions = ref([])\nconst attemptSubmitted = ref(false)\nconst practiceSummary = ref({\n  answered_count: 0,\n  correct_count: 0,\n  wrong_count: 0,\n  accuracy: 0\n})\n\r\n// åŠ è½½çŠ¶æ€\r\nconst loading = ref(false)\r\n\r\n// å¼¹çª—å¼•ç”¨\r\nconst statsPopup = ref(null)\n\nconst isBankMode = computed(() => practiceMode.value === 'full' || practiceMode.value === 'chapter')\nconst isSpecialMode = computed(() => practiceMode.value === 'special')\nconst isRandomMode = computed(() => practiceMode.value === 'random')\nconst isRealMode = computed(() => practiceMode.value === 'real')\nconst showProgress = computed(() => !isRandomMode.value)\nconst showPracticeSummary = computed(() => isRandomMode.value)\n\n// ç­”æ¡ˆkeyæ ¼å¼ï¼šchapterId_questionNumber\nconst getAnswerKey = () => {\n  if (isRandomMode.value) {\n    return `random_${currentQuestionNumber.value}`\n  }\n  if (isRealMode.value) {\n    return `real_${paperId.value}_${currentQuestionNumber.value}`\n  }\n  if (isSpecialMode.value) {\n    return `special_${subjectChapterId.value}_${currentQuestionNumber.value}`\n  }\n  if (!currentChapter.value) return ''\n  return `${currentChapter.value.id}_${currentQuestionNumber.value}`\n}\n\r\n// ç”¨æˆ·å½“å‰é¢˜ç›®çš„ç­”æ¡ˆ\r\nconst userAnswer = computed(() => userAnswers.value[getAnswerKey()] || '')\n\n// æ ‡é¢˜æ–‡æœ¬\nconst titleText = computed(() => {\n  if (isRealMode.value) {\n    return paperName.value || 'çœŸé¢˜ç»ƒä¹ '\n  }\n  if (isRandomMode.value) {\n    return subjectName.value ? `${subjectName.value} éšæœºç»ƒä¹ ` : 'éšæœºç»ƒä¹ '\n  }\n  if (isSpecialMode.value) {\n    return currentChapter.value?.chapter_name || subjectName.value || 'ä¸“é¡¹è®­ç»ƒ'\n  }\n  if (practiceMode.value === 'chapter') {\n    return currentChapter.value?.chapter_name || bankInfo.value.bank_name\n  }\n  return bankInfo.value.bank_name\n})\n\nconst totalQuestions = computed(() => {\n  if (isRandomMode.value) {\n    return randomQuestions.value.length\n  }\n  if (isSpecialMode.value || isRealMode.value || practiceMode.value === 'chapter') {\n    return totalInChapter.value\n  }\n  return bankInfo.value.total_questions\n})\n\n// å‰¯æ ‡é¢˜æ–‡æœ¬\nconst subtitleText = computed(() => {\n  if (isSpecialMode.value || isRandomMode.value || isRealMode.value || practiceMode.value === 'chapter') {\n    return `ç¬¬ ${currentQuestionNumber.value} / ${totalQuestions.value} é¢˜`\n  }\n\n  // æ•´å·æ¨¡å¼æ˜¾ç¤ºæ€»è¿›åº¦\n  let position = 0\n  chapters.value.forEach((chapter, index) => {\r\n    if (index < currentChapterIndex.value) {\r\n      position += chapter.question_count\r\n    }\r\n  })\r\n  position += currentQuestionNumber.value\r\n\r\n  const chapterName = currentChapter.value?.chapter_name || ''\n  return `ç¬¬ ${position} / ${bankInfo.value.total_questions} é¢˜ (${chapterName})`\n})\n\n// è¿›åº¦ç™¾åˆ†æ¯”\nconst progressPercent = computed(() => {\n  if (isRandomMode.value) {\n    return 0\n  }\n  if (isSpecialMode.value || isRealMode.value || practiceMode.value === 'chapter') {\n    return totalQuestions.value > 0\n      ? Math.round((currentQuestionNumber.value / totalQuestions.value) * 100)\n      : 0\n  }\n\r\n  // æ•´å·æ¨¡å¼è®¡ç®—æ•´ä½“è¿›åº¦\r\n  let totalQuestionCount = 0\n  let currentPosition = 0\n\n  chapters.value.forEach((chapter, index) => {\n    totalQuestionCount += chapter.question_count\n    if (index < currentChapterIndex.value) {\n      currentPosition += chapter.question_count\n    }\n  })\n  currentPosition += currentQuestionNumber.value\n\n  return totalQuestionCount > 0 ? Math.round((currentPosition / totalQuestionCount) * 100) : 0\n})\n\r\n// å·²ç­”é¢˜æ•°\r\nconst answeredCount = computed(() => Object.keys(userAnswers.value).length)\r\n\r\n// æ­£ç¡®æ•°\r\nconst correctCount = computed(() => {\r\n  return Object.keys(userAnswers.value).filter(key => {\r\n    const userAns = userAnswers.value[key]\r\n    return checkAnswerByKey(key, userAns)\r\n  }).length\r\n})\r\n\r\n// é”™è¯¯æ•°\r\nconst wrongCount = computed(() => answeredCount.value - correctCount.value)\r\n\r\n// æ­£ç¡®ç‡\r\nconst accuracy = computed(() => {\r\n  if (answeredCount.value === 0) return 0\r\n  return Math.round(correctCount.value / answeredCount.value * 100)\r\n})\r\n\r\n// å½“å‰ç­”æ¡ˆæ˜¯å¦æ­£ç¡®\r\nconst isAnswerCorrect = computed(() => {\n  if (!userAnswer.value) return false\n  return userAnswer.value === formatAnswer(currentQuestion.value.answer)\n})\n\nconst imageBankId = computed(() => {\n  return currentQuestion.value?.bank_id || bankId.value || 0\n})\n\n// è§£æåçš„é¢˜ç›®å†…å®¹ï¼ˆåŒ…å«å›¾ç‰‡ï¼‰\nconst parsedContent = computed(() => {\n  if (!currentQuestion.value || !currentQuestion.value.content) return ''\n  const baseUrl = API_CONFIG.BASE_URL.replace('/api', '')\n  return parseQuestionImages(currentQuestion.value.content, imageBankId.value, baseUrl)\n})\n\n// è§£æåçš„ç­”æ¡ˆè§£æï¼ˆåŒ…å«å›¾ç‰‡ï¼‰\nconst parsedExplanation = computed(() => {\n  if (!currentQuestion.value || !currentQuestion.value.explanation) return ''\n  const baseUrl = API_CONFIG.BASE_URL.replace('/api', '')\n  return parseQuestionImages(currentQuestion.value.explanation, imageBankId.value, baseUrl)\n})\n\n// è·å–å½“å‰é¢˜ç›®æ‰€æœ‰å›¾ç‰‡URLï¼ˆç”¨äºé¢„è§ˆï¼‰\nconst currentImageUrls = computed(() => {\n  if (!currentQuestion.value) return []\n  const baseUrl = API_CONFIG.BASE_URL.replace('/api', '')\n  return extractAllQuestionImages(currentQuestion.value, imageBankId.value, baseUrl)\n})\n\r\n// é¡µé¢åŠ è½½\r\nonMounted(async () => {\r\n  // è·å–èƒ¶å›ŠæŒ‰é’®ä¿¡æ¯ï¼ˆä»…å¾®ä¿¡å°ç¨‹åºï¼‰\r\n  // #ifdef MP-WEIXIN\r\n  try {\r\n    const menuButton = uni.getMenuButtonBoundingClientRect()\r\n    const systemInfo = uni.getSystemInfoSync()\r\n    menuButtonInfo.value = menuButton\r\n    statusBarHeight.value = systemInfo.statusBarHeight || 0\r\n\r\n    // è®¡ç®—å¯¼èˆªæ é«˜åº¦ï¼šèƒ¶å›ŠæŒ‰é’®åº•éƒ¨ä½ç½® + ä¸é¡¶éƒ¨ç›¸åŒçš„é—´è·\r\n    const gap = menuButton.top - statusBarHeight.value\r\n    navBarHeight.value = menuButton.height + gap * 2 + statusBarHeight.value\r\n  } catch (e) {\r\n    console.error('è·å–èƒ¶å›ŠæŒ‰é’®ä¿¡æ¯å¤±è´¥:', e)\r\n  }\r\n  // #endif\r\n\r\n  // è·å–è·¯ç”±å‚æ•°\r\n  const pages = getCurrentPages()\r\n  const currentPage = pages[pages.length - 1]\r\n  const options = currentPage.options\r\n\r\n  practiceMode.value = options.mode || 'full'\n  bankId.value = parseInt(options.bankId) || 0\n  subjectId.value = parseInt(options.subjectId) || 0\n  subjectChapterId.value = parseInt(options.subjectChapterId || options.chapterId) || 0\n  paperId.value = parseInt(options.paperId) || 0\n  subjectName.value = options.subjectName ? decodeURIComponent(options.subjectName) : ''\n  chapterName.value = options.chapterName ? decodeURIComponent(options.chapterName) : ''\n  paperName.value = options.paperName ? decodeURIComponent(options.paperName) : ''\n  startChapterId.value = parseInt(options.chapterId) || null\n  startQuestionNumber.value = parseInt(options.questionNumber) || 1\n\n  const paramError = (() => {\n    if (isBankMode.value && !bankId.value) return 'é¢˜åº“å‚æ•°é”™è¯¯'\n    if (isSpecialMode.value && (!subjectId.value || !subjectChapterId.value)) return 'ç§‘ç›®ç« èŠ‚å‚æ•°é”™è¯¯'\n    if (isRandomMode.value && !subjectId.value) return 'ç§‘ç›®å‚æ•°é”™è¯¯'\n    if (isRealMode.value && !paperId.value) return 'è¯•å·å‚æ•°é”™è¯¯'\n    return ''\n  })()\n\n  if (paramError) {\n    uni.showToast({ title: paramError, icon: 'none' })\n    setTimeout(() => {\n      uni.navigateBack()\n    }, 1500)\n    return\n  }\n\r\n  await initExam()\r\n\r\n  // ç›‘å¬å°ç¨‹åºéšè—äº‹ä»¶\n  uni.onAppHide(() => {\n    saveCurrentProgress()\n  })\n})\n\r\nconst saveCurrentProgress = async () => {\n  if (isBankMode.value) {\n    await saveProgress()\n    return\n  }\n  if (isSpecialMode.value) {\n    await saveSpecialProgress()\n  }\n}\n\n// é¡µé¢å¸è½½æ—¶ä¿å­˜è¿›åº¦\nonUnmounted(() => {\n  saveCurrentProgress()\n})\n\r\n// ç›‘å¬é¢˜å·å’Œç« èŠ‚å˜åŒ–ï¼Œè‡ªåŠ¨ä¿å­˜è¿›åº¦\r\nwatch([currentQuestionNumber, currentChapterIndex], ([newQuestionNum, newChapterIdx], [oldQuestionNum, oldChapterIdx]) => {\n  if ((oldQuestionNum !== undefined && newQuestionNum !== oldQuestionNum) ||\n    (oldChapterIdx !== undefined && newChapterIdx !== oldChapterIdx)) {\n    saveCurrentProgress()\n  }\n})\n\r\n// åˆå§‹åŒ–è€ƒè¯•\r\nconst initExam = async () => {\n  loading.value = true\n  try {\n    if (isRandomMode.value) {\n      await initRandomExam()\n      return\n    }\n    if (isSpecialMode.value) {\n      await initSpecialExam()\n      return\n    }\n    if (isRealMode.value) {\n      await initRealExam()\n      return\n    }\n\n    console.log('ğŸ“– å¼€å§‹åˆå§‹åŒ–è€ƒè¯•ï¼Œå‚æ•°:', {\n      bankId: bankId.value,\n      mode: practiceMode.value,\n      chapterId: startChapterId.value,\r\n      questionNumber: startQuestionNumber.value\r\n    })\r\n\r\n    // 1. è·å–é¢˜åº“åŸºæœ¬ä¿¡æ¯ï¼ˆä½¿ç”¨æ–°çš„é¢˜åº“ç®¡ç†APIï¼‰\r\n    const bankData = await get(`/questions/banks/${bankId.value}`, {}, { showLoading: false })\r\n    console.log('âœ… é¢˜åº“ä¿¡æ¯:', bankData)\r\n\r\n    bankInfo.value = {\r\n      bank_name: bankData.name || 'é¢˜åº“',\r\n      total_questions: bankData.question_count || 0\r\n    }\r\n\r\n    // 2. è·å–ç« èŠ‚åˆ—è¡¨\r\n    const chaptersData = await get(`/question-banks/${bankId.value}/chapters`, {}, { showLoading: false })\r\n    console.log('âœ… ç« èŠ‚åˆ—è¡¨:', chaptersData)\r\n\r\n    chapters.value = chaptersData.chapters || []\r\n\r\n    if (chapters.value.length === 0) {\r\n      uni.showToast({ title: 'è¯¥é¢˜åº“æš‚æ— ç« èŠ‚', icon: 'none' })\r\n      setTimeout(() => uni.navigateBack(), 1500)\r\n      return\r\n    }\r\n\r\n    // 3. ç¡®å®šèµ·å§‹ç« èŠ‚\r\n    if (startChapterId.value) {\r\n      const index = chapters.value.findIndex(c => c.id === startChapterId.value)\r\n      currentChapterIndex.value = index >= 0 ? index : 0\r\n      console.log(`ğŸ“ æ‰¾åˆ°èµ·å§‹ç« èŠ‚ï¼Œç´¢å¼•: ${currentChapterIndex.value}`)\r\n    } else {\r\n      currentChapterIndex.value = 0\r\n      console.log('ğŸ“ ä½¿ç”¨ç¬¬ä¸€ä¸ªç« èŠ‚')\r\n    }\r\n\r\n    currentChapter.value = chapters.value[currentChapterIndex.value]\r\n    currentQuestionNumber.value = startQuestionNumber.value\r\n\r\n    console.log('ğŸ“ å½“å‰ç« èŠ‚:', currentChapter.value)\r\n    console.log('ğŸ“ èµ·å§‹é¢˜å·:', currentQuestionNumber.value)\r\n\r\n    // 4. åŠ è½½èµ·å§‹é¢˜ç›®\r\n    await loadQuestion()\r\n\r\n    console.log(`âœ… åˆå§‹åŒ–å®Œæˆï¼Œå¼€å§‹${practiceMode.value === 'chapter' ? 'ç« èŠ‚' : 'æ•´å·'}ç»ƒä¹ `)\r\n\r\n  } catch (error) {\r\n    console.error('âŒ åˆå§‹åŒ–å¤±è´¥:', error)\r\n    uni.showToast({\r\n      title: error.message || 'åŠ è½½å¤±è´¥',\r\n      icon: 'none'\r\n    })\r\n    setTimeout(() => uni.navigateBack(), 1500)\r\n  } finally {\r\n    loading.value = false\r\n    console.log('âœ… åˆå§‹åŒ–loadingçŠ¶æ€å·²é‡ç½®')\r\n  }\r\n}\r\n\r\nconst initSpecialExam = async () => {\n  console.log('ğŸ“˜ åˆå§‹åŒ–ä¸“é¡¹è®­ç»ƒ', {\n    subjectId: subjectId.value,\n    subjectChapterId: subjectChapterId.value\n  })\n\n  chapters.value = []\n  currentChapterIndex.value = 0\n  currentChapter.value = {\n    id: subjectChapterId.value,\n    chapter_name: chapterName.value || subjectName.value || 'ä¸“é¡¹è®­ç»ƒ'\n  }\n\n  bankInfo.value = {\n    bank_name: currentChapter.value.chapter_name,\n    total_questions: 0\n  }\n\n  currentQuestionNumber.value = startQuestionNumber.value\n  await loadQuestion()\n}\n\nconst initRandomExam = async () => {\n  console.log('ğŸ“˜ åˆå§‹åŒ–éšæœºç»ƒä¹ ', { subjectId: subjectId.value })\n\n  chapters.value = []\n  currentChapterIndex.value = 0\n  currentChapter.value = null\n  randomQuestions.value = []\n\n  const response = await get(\n    `/subjects/${subjectId.value}/random`,\n    { count: 10 },\n    { showLoading: false }\n  )\n\n  randomQuestions.value = response.questions || []\n  totalInChapter.value = randomQuestions.value.length\n  bankInfo.value = {\n    bank_name: subjectName.value || 'éšæœºç»ƒä¹ ',\n    total_questions: totalInChapter.value\n  }\n\n  await fetchPracticeSummary()\n\n  if (!randomQuestions.value.length) {\n    uni.showToast({ title: 'æš‚æ— å¯ç”¨é¢˜ç›®', icon: 'none' })\n    setTimeout(() => uni.navigateBack(), 1500)\n    return\n  }\n\n  currentQuestionNumber.value = Math.min(startQuestionNumber.value, totalInChapter.value || 1)\n  await loadQuestion()\n}\n\nconst initRealExam = async () => {\n  console.log('ğŸ“˜ åˆå§‹åŒ–çœŸé¢˜ç»ƒä¹ ', { paperId: paperId.value })\n\n  chapters.value = []\n  currentChapterIndex.value = 0\n  currentChapter.value = null\n  bankInfo.value = {\n    bank_name: paperName.value || 'çœŸé¢˜ç»ƒä¹ ',\n    total_questions: 0\n  }\n\n  currentQuestionNumber.value = startQuestionNumber.value\n  await loadQuestion()\n}\n\n// åŠ è½½é¢˜ç›®ï¼ˆå•é¢˜æ¨¡å¼ï¼‰\nconst loadQuestion = async () => {\n  if (isRandomMode.value) {\n    await loadRandomQuestion()\n    return\n  }\n  if (isSpecialMode.value) {\n    await loadSpecialQuestion()\n    return\n  }\n  if (isRealMode.value) {\n    await loadRealQuestion()\n    return\n  }\n  if (!currentChapter.value) {\r\n    console.error('âŒ currentChapter is null')\r\n    return\r\n  }\r\n\r\n  loading.value = true\r\n  try {\r\n    console.log(`ğŸ“– å¼€å§‹åŠ è½½é¢˜ç›®: é¢˜åº“${bankId.value}, ç« èŠ‚${currentChapter.value.id}, é¢˜å·${currentQuestionNumber.value}`)\r\n\r\n    const response = await get(\r\n      `/question-banks/${bankId.value}/chapters/${currentChapter.value.id}/questions`,\r\n      { questionNumber: currentQuestionNumber.value },\r\n      { showLoading: false } // ä½¿ç”¨ç»„ä»¶è‡ªå·±çš„loadingçŠ¶æ€ï¼Œä¸æ˜¾ç¤ºç³»ç»ŸåŠ è½½æç¤º\r\n    )\r\n\r\n    console.log('ğŸ“¡ é¢˜ç›®æ•°æ®å“åº”:', response)\r\n\r\n    if (response && response.question) {\r\n      currentQuestion.value = response.question\r\n      totalInChapter.value = response.total || 0\r\n      hasNextQuestion.value = response.hasNext || false\r\n      hasPrevQuestion.value = response.hasPrev || false\r\n\r\n      // æ›´æ–°é¢˜åº“æ€»é¢˜æ•°ï¼ˆæ•´å·æ¨¡å¼ä¸‹ç´¯åŠ æ‰€æœ‰ç« èŠ‚é¢˜æ•°ï¼‰\r\n      if (practiceMode.value === 'full' && chapters.value.length > 0) {\r\n        let totalCount = 0\r\n        chapters.value.forEach(chapter => {\r\n          totalCount += chapter.question_count || 0\r\n        })\r\n        if (totalCount > 0) {\r\n          bankInfo.value.total_questions = totalCount\r\n        }\r\n      }\r\n\r\n      // ç¼“å­˜é¢˜ç›®\r\n      const cacheKey = getAnswerKey()\r\n      questionCache.value[cacheKey] = response.question\r\n\r\n      // é‡ç½®ç­”æ¡ˆæ˜¾ç¤ºçŠ¶æ€\r\n      showAnswer.value = false\r\n\r\n      console.log(`âœ… é¢˜ç›®åŠ è½½æˆåŠŸ: ${currentChapter.value.chapter_name} ç¬¬${currentQuestionNumber.value}é¢˜`)\r\n    } else {\r\n      console.warn('âš ï¸ å“åº”ä¸­æ²¡æœ‰questionå­—æ®µ:', response)\r\n      // æ²¡æœ‰æ›´å¤šé¢˜ç›®äº†\r\n      if (practiceMode.value === 'full' && canSwitchToNextChapter()) {\r\n        // æ•´å·æ¨¡å¼ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ç« èŠ‚\r\n        await switchToNextChapter()\r\n      } else {\r\n        uni.showToast({ title: 'å·²æ˜¯æœ€åä¸€é¢˜', icon: 'none' })\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('âŒ åŠ è½½é¢˜ç›®å¤±è´¥:', error)\r\n    uni.showToast({\r\n      title: error.message || 'åŠ è½½å¤±è´¥',\r\n      icon: 'none'\r\n    })\r\n  } finally {\r\n    loading.value = false\r\n    console.log('âœ… loadingçŠ¶æ€å·²é‡ç½®ä¸ºfalse')\r\n  }\r\n}\r\n\r\nconst loadSpecialQuestion = async () => {\n  loading.value = true\n  try {\n    const response = await get(\n      `/subjects/${subjectId.value}/chapters/${subjectChapterId.value}/questions`,\n      { questionNumber: currentQuestionNumber.value },\n      { showLoading: false }\n    )\n\n    if (response && response.question) {\n      currentQuestion.value = response.question\n      totalInChapter.value = response.total || 0\n      hasNextQuestion.value = response.hasNext || false\n      hasPrevQuestion.value = response.hasPrev || false\n\n      const cacheKey = getAnswerKey()\n      questionCache.value[cacheKey] = response.question\n      showAnswer.value = false\n    } else {\n      uni.showToast({ title: 'å·²æ˜¯æœ€åä¸€é¢˜', icon: 'none' })\n    }\n  } catch (error) {\n    console.error('âŒ åŠ è½½ä¸“é¡¹é¢˜ç›®å¤±è´¥:', error)\n    uni.showToast({\n      title: error.message || 'åŠ è½½å¤±è´¥',\n      icon: 'none'\n    })\n  } finally {\n    loading.value = false\n  }\n}\n\nconst loadRandomQuestion = async () => {\n  totalInChapter.value = randomQuestions.value.length\n  const index = currentQuestionNumber.value - 1\n  const question = randomQuestions.value[index]\n\n  if (!question) {\n    uni.showToast({ title: 'å·²æ˜¯æœ€åä¸€é¢˜', icon: 'none' })\n    return\n  }\n\n  currentQuestion.value = question\n  hasNextQuestion.value = index < randomQuestions.value.length - 1\n  hasPrevQuestion.value = index > 0\n\n  const cacheKey = getAnswerKey()\n  questionCache.value[cacheKey] = question\n  showAnswer.value = false\n}\n\nconst loadRealQuestion = async () => {\n  loading.value = true\n  try {\n    const response = await get(\n      `/real-exams/${paperId.value}/questions`,\n      { questionNumber: currentQuestionNumber.value },\n      { showLoading: false }\n    )\n\n    if (response && response.question) {\n      currentQuestion.value = response.question\n      totalInChapter.value = response.total || 0\n      bankInfo.value.total_questions = response.total || 0\n      hasNextQuestion.value = response.hasNext || false\n      hasPrevQuestion.value = response.hasPrev || false\n\n      const cacheKey = getAnswerKey()\n      questionCache.value[cacheKey] = response.question\n      showAnswer.value = false\n    } else {\n      uni.showToast({ title: 'å·²æ˜¯æœ€åä¸€é¢˜', icon: 'none' })\n    }\n  } catch (error) {\n    console.error('âŒ åŠ è½½çœŸé¢˜å¤±è´¥:', error)\n    uni.showToast({\n      title: error.message || 'åŠ è½½å¤±è´¥',\n      icon: 'none'\n    })\n  } finally {\n    loading.value = false\n  }\n}\n\n// æ£€æŸ¥æ˜¯å¦å¯ä»¥åˆ‡æ¢åˆ°ä¸‹ä¸€ç« èŠ‚\nconst canSwitchToNextChapter = () => {\n  if (!isBankMode.value) return false\n  return currentChapterIndex.value < chapters.value.length - 1\n}\n\r\n// æ£€æŸ¥æ˜¯å¦å¯ä»¥åˆ‡æ¢åˆ°ä¸Šä¸€ç« èŠ‚\r\nconst canSwitchToPrevChapter = () => {\n  if (!isBankMode.value) return false\n  return currentChapterIndex.value > 0\n}\n\r\n// åˆ‡æ¢åˆ°ä¸‹ä¸€ç« èŠ‚\r\nconst switchToNextChapter = async () => {\r\n  if (canSwitchToNextChapter()) {\r\n    currentChapterIndex.value++\r\n    currentChapter.value = chapters.value[currentChapterIndex.value]\r\n    currentQuestionNumber.value = 1\r\n\r\n    uni.showToast({\r\n      title: `è¿›å…¥${currentChapter.value.chapter_name}`,\r\n      icon: 'none',\r\n      duration: 1500\r\n    })\r\n\r\n    await loadQuestion()\r\n  }\r\n}\r\n\r\n// åˆ‡æ¢åˆ°ä¸Šä¸€ç« èŠ‚\r\nconst switchToPrevChapter = async () => {\r\n  if (canSwitchToPrevChapter()) {\r\n    currentChapterIndex.value--\r\n    currentChapter.value = chapters.value[currentChapterIndex.value]\r\n    currentQuestionNumber.value = currentChapter.value.question_count\r\n\r\n    await loadQuestion()\r\n  }\r\n}\r\n\r\n// è·å–é¢˜å‹æ ‡ç­¾\r\nconst getTypeLabel = (type) => {\r\n  const typeMap = {\r\n    'single': 'å•é€‰é¢˜',\r\n    'multiple': 'å¤šé€‰é¢˜',\r\n    'judge': 'åˆ¤æ–­é¢˜',\r\n    'fill': 'å¡«ç©ºé¢˜'\r\n  }\r\n  return typeMap[type] || 'æœªçŸ¥é¢˜å‹'\r\n}\r\n\r\n// è·å–é€‰é¡¹æ ‡ç­¾\r\nconst getOptionLabel = (index) => {\r\n  return String.fromCharCode(65 + index) // A, B, C, D...\r\n}\r\n\r\n// æ ¼å¼åŒ–ç­”æ¡ˆ\r\nconst formatAnswer = (answer) => {\r\n  if (!answer) return ''\r\n\r\n  // å¦‚æœæ˜¯å¤šé€‰é¢˜ï¼Œç­”æ¡ˆå¯èƒ½æ˜¯ \"AB\" æˆ– [\"A\", \"B\"]\r\n  if (Array.isArray(answer)) {\r\n    return answer.sort().join('')\r\n  }\r\n\r\n  // å•é€‰é¢˜æˆ–åˆ¤æ–­é¢˜\r\n  return answer.toString().toUpperCase()\r\n}\r\n\r\n// åˆ¤æ–­é€‰é¡¹æ˜¯å¦è¢«é€‰ä¸­\r\nconst isOptionSelected = (optionIndex) => {\r\n  const key = getAnswerKey()\r\n  const answer = userAnswers.value[key]\r\n  if (!answer) return false\r\n\r\n  const label = getOptionLabel(optionIndex)\r\n\r\n  if (currentQuestion.value.type === 'multiple') {\r\n    return answer.includes(label)\r\n  }\r\n\r\n  return answer === label\r\n}\r\n\r\n// åˆ¤æ–­é€‰é¡¹æ˜¯å¦æ˜¯æ­£ç¡®ç­”æ¡ˆ\r\nconst isCorrectOption = (optionIndex) => {\r\n  const correctAnswer = formatAnswer(currentQuestion.value.answer)\r\n  const label = getOptionLabel(optionIndex)\r\n\r\n  if (currentQuestion.value.type === 'multiple') {\r\n    return correctAnswer.includes(label)\r\n  }\r\n\r\n  return correctAnswer === label\r\n}\r\n\r\n// é€‰æ‹©é€‰é¡¹\r\nconst selectOption = (optionIndex) => {\r\n  if (showAnswer.value) return // å·²æ˜¾ç¤ºç­”æ¡ˆæ—¶ä¸èƒ½å†é€‰æ‹©\r\n\r\n  const label = getOptionLabel(optionIndex)\r\n  const key = getAnswerKey()\r\n\r\n  if (currentQuestion.value.type === 'multiple') {\r\n    // å¤šé€‰é¢˜\r\n    let currentAnswer = userAnswers.value[key] || ''\r\n\r\n    if (currentAnswer.includes(label)) {\r\n      // å–æ¶ˆé€‰æ‹©\r\n      currentAnswer = currentAnswer.replace(label, '')\r\n    } else {\r\n      // æ·»åŠ é€‰æ‹©\r\n      currentAnswer += label\r\n    }\r\n\r\n    // æŒ‰å­—æ¯é¡ºåºæ’åº\r\n    currentAnswer = currentAnswer.split('').sort().join('')\r\n\r\n    userAnswers.value[key] = currentAnswer\r\n  } else {\r\n    // å•é€‰é¢˜æˆ–åˆ¤æ–­é¢˜\r\n    userAnswers.value[key] = label\r\n  }\r\n\r\n  // é€‰æ‹©åè‡ªåŠ¨æ˜¾ç¤ºç­”æ¡ˆ\r\n  setTimeout(() => {\r\n    showAnswer.value = true\r\n  }, 300)\r\n}\r\n\r\n// åˆ‡æ¢ç­”æ¡ˆæ˜¾ç¤º\r\nconst toggleAnswer = () => {\r\n  showAnswer.value = !showAnswer.value\r\n}\r\n\r\n// ä¸Šä¸€é¢˜\r\nconst prevQuestion = async () => {\r\n  if (hasPrevQuestion.value) {\r\n    // ç« èŠ‚å†…æœ‰ä¸Šä¸€é¢˜\r\n    currentQuestionNumber.value--\r\n    await loadQuestion()\r\n  } else {\r\n    // ç« èŠ‚å†…æ²¡æœ‰ä¸Šä¸€é¢˜äº†\r\n    if (practiceMode.value === 'full' && canSwitchToPrevChapter()) {\r\n      // æ•´å·æ¨¡å¼ï¼Œå¯ä»¥è¿”å›ä¸Šä¸€ç« èŠ‚\r\n      uni.showModal({\r\n        title: 'è¿”å›ä¸Šä¸€ç« èŠ‚',\r\n        content: 'æ˜¯å¦è¿”å›ä¸Šä¸€ç« èŠ‚çš„æœ€åä¸€é¢˜ï¼Ÿ',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            await switchToPrevChapter()\r\n          }\r\n        }\r\n      })\r\n    } else {\r\n      uni.showToast({ title: 'å·²æ˜¯ç¬¬ä¸€é¢˜', icon: 'none' })\r\n    }\r\n  }\r\n}\r\n\r\n// ä¸‹ä¸€é¢˜\r\nconst nextQuestion = async () => {\r\n  if (hasNextQuestion.value) {\r\n    // ç« èŠ‚å†…æœ‰ä¸‹ä¸€é¢˜\r\n    currentQuestionNumber.value++\r\n    await loadQuestion()\r\n  } else {\r\n    // ç« èŠ‚å†…æ²¡æœ‰ä¸‹ä¸€é¢˜äº†\r\n    if (practiceMode.value === 'full' && canSwitchToNextChapter()) {\r\n      // æ•´å·æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ç« èŠ‚\r\n      uni.showModal({\r\n        title: 'ç« èŠ‚å®Œæˆ',\r\n        content: `ã€Œ${currentChapter.value.chapter_name}ã€å·²å®Œæˆ\\n\\næ˜¯å¦ç»§ç»­ä¸‹ä¸€ç« èŠ‚ï¼Ÿ`,\r\n        confirmText: 'ç»§ç»­',\r\n        cancelText: 'é€€å‡º',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            await switchToNextChapter()\r\n          } else {\r\n            handleBack()\r\n          }\r\n        }\r\n      })\r\n    } else {\r\n      // ç« èŠ‚ç»ƒä¹ æ¨¡å¼æˆ–å·²æ˜¯æœ€åä¸€ç« \r\n      uni.showToast({ title: 'æœ¬ç« èŠ‚å·²å®Œæˆ', icon: 'success' })\r\n      finishExam()\r\n    }\r\n  }\r\n}\r\n\r\n// è·³è½¬åˆ°æŒ‡å®šé¢˜ç›®ï¼ˆç®€åŒ–ç‰ˆï¼Œä»…ç”¨äºç»Ÿè®¡å¼¹çª—ï¼‰\r\nconst jumpToQuestion = async (questionNumber) => {\n  const maxQuestions = practiceMode.value === 'full' ? totalInChapter.value : totalQuestions.value\n  if (questionNumber >= 1 && questionNumber <= maxQuestions) {\n    currentQuestionNumber.value = questionNumber\n    await loadQuestion()\n    closeStats()\n  }\n}\n\r\n// æ£€æŸ¥ç­”æ¡ˆæ˜¯å¦æ­£ç¡®ï¼ˆä½¿ç”¨ç¼“å­˜çš„é¢˜ç›®ä¿¡æ¯ï¼‰\r\nconst checkAnswerByKey = (answerKey, userAns) => {\r\n  if (!userAns) return false\r\n\r\n  const cachedQuestion = questionCache.value[answerKey]\r\n  if (!cachedQuestion) return false\r\n\r\n  const correctAns = formatAnswer(cachedQuestion.answer)\r\n  return userAns === correctAns\r\n}\r\n\r\n// æ˜¾ç¤ºç»Ÿè®¡\r\nconst showStats = () => {\r\n  statsPopup.value.open()\r\n}\r\n\r\n// å…³é—­ç»Ÿè®¡\r\nconst closeStats = () => {\r\n  statsPopup.value.close()\r\n}\r\n\r\n// ä¿å­˜å­¦ä¹ è¿›åº¦\r\nconst saveProgress = async () => {\n  if (!isBankMode.value) return\n  if (!bankId.value || !currentChapter.value) return\n\r\n  try {\r\n    if (practiceMode.value === 'chapter') {\r\n      // ç« èŠ‚ç»ƒä¹ ï¼šä¿å­˜åˆ°å…·ä½“ç« èŠ‚\r\n      await post(\r\n        `/user-progress/${bankId.value}/chapters/${currentChapter.value.id}`,\r\n        {\r\n          practice_mode: 'chapter',\r\n          current_question_number: currentQuestionNumber.value,\r\n          completed_count: currentQuestionNumber.value,\r\n          total_questions: totalInChapter.value\r\n        },\r\n        { showLoading: false }\r\n      )\r\n\r\n      console.log('ğŸ’¾ ç« èŠ‚è¿›åº¦å·²ä¿å­˜:', {\r\n        mode: 'chapter',\r\n        chapter: currentChapter.value.chapter_name,\r\n        questionNumber: currentQuestionNumber.value,\r\n        completedCount: currentQuestionNumber.value,\r\n        total: totalInChapter.value\r\n      })\r\n    } else {\r\n      // æ•´å·ç»ƒä¹ ï¼šä¿å­˜åˆ°chapter_id=0ï¼Œè®°å½•æ•´ä½“è¿›åº¦\r\n      // è®¡ç®—æ•´ä½“å®Œæˆçš„é¢˜ç›®æ•°ï¼ˆå‰é¢ç« èŠ‚çš„é¢˜æ•° + å½“å‰ç« èŠ‚çš„é¢˜å·ï¼‰\r\n      let totalCompleted = currentQuestionNumber.value\r\n      for (let i = 0; i < currentChapterIndex.value; i++) {\r\n        totalCompleted += chapters.value[i].question_count || 0\r\n      }\r\n\r\n      await post(\r\n        `/user-progress/${bankId.value}/chapters/0`,\r\n        {\r\n          practice_mode: 'full',\r\n          current_chapter_id: currentChapter.value.id,\r\n          current_question_number: currentQuestionNumber.value,\r\n          completed_count: totalCompleted,\r\n          total_questions: bankInfo.value.total_questions\r\n        },\r\n        { showLoading: false }\r\n      )\r\n\r\n      console.log('ğŸ’¾ æ•´å·è¿›åº¦å·²ä¿å­˜:', {\r\n        mode: 'full',\r\n        chapter: currentChapter.value.chapter_name,\r\n        chapterQuestionNumber: currentQuestionNumber.value,\r\n        totalCompleted: totalCompleted,\r\n        total: bankInfo.value.total_questions\r\n      })\r\n    }\r\n  } catch (error) {\r\n    console.error('ä¿å­˜è¿›åº¦å¤±è´¥:', error)\r\n  }\r\n}\r\n\r\n// é‡ç½®å­¦ä¹ è¿›åº¦\r\nconst resetProgress = async () => {\r\n  uni.showModal({\r\n    title: 'é‡æ–°ç»ƒä¹ ',\r\n    content: 'ç¡®å®šè¦æ¸…é™¤å½“å‰ç« èŠ‚è¿›åº¦ï¼Œé‡æ–°å¼€å§‹ç»ƒä¹ å—ï¼Ÿ',\r\n    confirmText: 'ç¡®å®š',\r\n    cancelText: 'å–æ¶ˆ',\r\n    success: async (res) => {\r\n      if (res.confirm) {\r\n        try {\r\n          uni.showLoading({ title: 'é‡ç½®ä¸­...' })\n\n          if (!isBankMode.value) {\n            currentQuestionNumber.value = 1\n            userAnswers.value = {}\n            showAnswer.value = false\n            questionCache.value = {}\n            attemptSubmitted.value = false\n\n            await loadQuestion()\n\n            uni.hideLoading()\n            uni.showToast({\n              title: 'å·²é‡æ–°å¼€å§‹',\n              icon: 'success'\n            })\n            return\n          }\n\n          // åˆ é™¤å½“å‰ç« èŠ‚è¿›åº¦\n          if (practiceMode.value === 'chapter') {\r\n            // ç« èŠ‚ç»ƒä¹ ï¼šåªåˆ é™¤å½“å‰ç« èŠ‚\r\n            await del(`/user-progress/${bankId.value}/chapters/${currentChapter.value.id}`)\r\n          } else {\r\n            // æ•´å·ç»ƒä¹ ï¼šåˆ é™¤æ‰€æœ‰ç« èŠ‚è¿›åº¦\r\n            await del(`/user-progress/${bankId.value}`)\r\n          }\r\n\r\n          // é‡ç½®æœ¬åœ°çŠ¶æ€\r\n          currentQuestionNumber.value = 1\n          userAnswers.value = {}\n          showAnswer.value = false\n          questionCache.value = {}\n          attemptSubmitted.value = false\n\n          // é‡æ–°åŠ è½½ç¬¬ä¸€é¢˜\n          await loadQuestion()\n\r\n          uni.hideLoading()\r\n          uni.showToast({\r\n            title: 'å·²é‡æ–°å¼€å§‹',\r\n            icon: 'success'\r\n          })\r\n\r\n          console.log('ğŸ”„ å­¦ä¹ è¿›åº¦å·²é‡ç½®')\r\n        } catch (error) {\r\n          uni.hideLoading()\r\n          console.error('é‡ç½®è¿›åº¦å¤±è´¥:', error)\r\n          uni.showToast({\r\n            title: error.message || 'é‡ç½®å¤±è´¥',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst saveSpecialProgress = async () => {\n  if (!isSpecialMode.value || !subjectId.value || !subjectChapterId.value) return\n  if (totalQuestions.value <= 0) return\n  try {\n    await post(\n      `/subjects/${subjectId.value}/chapters/${subjectChapterId.value}/progress`,\n      {\n        current_question_number: currentQuestionNumber.value,\n        completed_count: currentQuestionNumber.value,\n        total_questions: totalQuestions.value\n      },\n      { showLoading: false }\n    )\n  } catch (error) {\n    console.error('âŒ ä¿å­˜ä¸“é¡¹è¿›åº¦å¤±è´¥:', error)\n  }\n}\n\nconst buildWrongQuestions = () => {\n  return Object.keys(userAnswers.value)\n    .map((key) => {\n      const userAns = userAnswers.value[key]\n      if (checkAnswerByKey(key, userAns)) return null\n      const cachedQuestion = questionCache.value[key]\n      if (!cachedQuestion) return null\n      return {\n        question_id: cachedQuestion.id,\n        selected_answer: userAns || null,\n        correct_answer: formatAnswer(cachedQuestion.answer) || null\n      }\n    })\n    .filter(Boolean)\n}\n\nconst buildAttemptQuestionIds = () => {\n  const ids = Object.keys(userAnswers.value)\n    .map((key) => questionCache.value[key]?.id)\n    .filter((id) => Number.isFinite(id))\n  return Array.from(new Set(ids))\n}\n\nconst getPracticeAttemptMode = () => {\n  if (isRandomMode.value) return 'random'\n  if (isSpecialMode.value) return 'special'\n  if (isBankMode.value) return 'mock'\n  return 'mock'\n}\n\nconst getPracticeSourceType = () => {\n  if (isRandomMode.value) return 'subject'\n  if (isSpecialMode.value) return 'subject_chapter'\n  if (practiceMode.value === 'chapter') return 'chapter'\n  return 'bank'\n}\n\nconst getPracticeSourceId = () => {\n  if (isRandomMode.value) return subjectId.value\n  if (isSpecialMode.value) return subjectChapterId.value\n  if (practiceMode.value === 'chapter') return currentChapter.value?.id || 0\n  return bankId.value\n}\n\nconst fetchPracticeSummary = async () => {\n  if (!isRandomMode.value || !subjectId.value) return\n  try {\n    const response = await get(\n      '/practice/summary',\n      { subjectId: subjectId.value, mode: 'random' },\n      { showLoading: false }\n    )\n    practiceSummary.value = response.stats || {\n      answered_count: 0,\n      correct_count: 0,\n      wrong_count: 0,\n      accuracy: 0\n    }\n  } catch (error) {\n    console.error('âŒ è·å–éšæœºç»ƒä¹ ç»Ÿè®¡å¤±è´¥:', error)\n  }\n}\n\nconst submitPracticeAttempt = async () => {\n  if (isRealMode.value || attemptSubmitted.value) return\n  if (!subjectId.value) return\n\n  const sourceId = getPracticeSourceId()\n  if (!sourceId) return\n\n  const questionIds = buildAttemptQuestionIds()\n  if (!questionIds.length) return\n\n  try {\n    const payload = {\n      subject_id: subjectId.value,\n      mode: getPracticeAttemptMode(),\n      source_type: getPracticeSourceType(),\n      source_id: sourceId,\n      total_questions: totalQuestions.value,\n      correct_count: correctCount.value,\n      wrong_count: wrongCount.value,\n      accuracy: accuracy.value,\n      question_source: 'question_bank',\n      question_ids: questionIds,\n      wrong_questions: buildWrongQuestions()\n    }\n    await post('/practice/attempts', payload, { showLoading: false })\n    attemptSubmitted.value = true\n  } catch (error) {\n    console.error('âŒ æäº¤ç»ƒä¹ ç»Ÿè®¡å¤±è´¥:', error)\n  }\n}\n\nconst submitRealAttempt = async () => {\n  if (!isRealMode.value || attemptSubmitted.value) return\n  try {\n    const payload = {\n      total_questions: totalQuestions.value,\n      correct_count: correctCount.value,\n      wrong_count: wrongCount.value,\n      accuracy: accuracy.value,\n      wrong_questions: buildWrongQuestions()\n    }\n    await post(`/real-exams/${paperId.value}/attempts`, payload, { showLoading: false })\n    attemptSubmitted.value = true\n  } catch (error) {\n    console.error('âŒ æäº¤çœŸé¢˜ç»“æœå¤±è´¥:', error)\n    uni.showToast({\n      title: error.message || 'æäº¤å¤±è´¥',\n      icon: 'none'\n    })\n  }\n}\n\nconst goToWrongQuestions = () => {\n  uni.navigateTo({\n    url: `/pages/real-exam-wrong/real-exam-wrong?paperId=${paperId.value}&paperName=${encodeURIComponent(paperName.value)}`\n  })\n}\n\n// å®Œæˆè€ƒè¯•\nconst finishExam = async () => {\n  // ä¿å­˜æœ€ç»ˆè¿›åº¦\n  if (isBankMode.value) {\n    saveProgress()\n  }\n  if (isSpecialMode.value) {\n    saveSpecialProgress()\n  }\n\n  const content = `å·²å®Œæˆ ${answeredCount.value}/${totalQuestions.value} é¢˜\\næ­£ç¡®ç‡ï¼š${accuracy.value}%`\n\n  if (isRealMode.value) {\n    await submitRealAttempt()\n    uni.showModal({\n      title: 'å®Œæˆç»ƒä¹ ',\n      content,\n      confirmText: 'æŸ¥çœ‹é”™é¢˜',\n      cancelText: 'è¿”å›',\n      success: (res) => {\n        if (res.confirm) {\n          goToWrongQuestions()\n        } else {\n          uni.navigateBack()\n        }\n      }\n    })\n    return\n  }\n\n  await submitPracticeAttempt()\n\n  uni.showModal({\n    title: 'å®Œæˆç»ƒä¹ ',\n    content,\n    confirmText: 'æŸ¥çœ‹ç»Ÿè®¡',\n    cancelText: 'è¿”å›',\n    success: (res) => {\n      if (res.confirm) {\n        showStats()\n      } else {\n        uni.navigateBack()\n      }\n    }\n  })\n}\n\r\n// è¿”å›\r\nconst handleBack = () => {\r\n  uni.showModal({\r\n    title: 'ç¡®è®¤é€€å‡º',\r\n    content: 'å­¦ä¹ è¿›åº¦å·²è‡ªåŠ¨ä¿å­˜ï¼Œç¡®å®šè¦é€€å‡ºå—ï¼Ÿ',\r\n    success: async (res) => {\r\n      if (res.confirm) {\r\n        // é€€å‡ºå‰ä¿å­˜ä¸€æ¬¡è¿›åº¦\r\n        await saveProgress()\r\n        uni.navigateBack()\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n// å¤„ç†å›¾ç‰‡ç‚¹å‡»äº‹ä»¶ï¼ˆé¢„è§ˆå›¾ç‰‡ï¼‰\r\nconst handleImageClick = () => {\r\n  if (currentImageUrls.value.length > 0) {\r\n    uni.previewImage({\r\n      urls: currentImageUrls.value,\r\n      current: 0\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.exam-container {\n  --primary: #3b82f6;\n  --primary-strong: #2563eb;\n  --accent: #f97316;\n  --success: #22c55e;\n  --danger: #ef4444;\n  --bg: #f8fafc;\n  --card: #ffffff;\n  --text: #0f172a;\n  --muted: #64748b;\n  --border: #e2e8f0;\n  --shadow-soft: 0 10rpx 24rpx rgba(15, 23, 42, 0.06);\n  --shadow: 0 16rpx 30rpx rgba(15, 23, 42, 0.12);\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: radial-gradient(120% 120% at 20% 0%, #eff6ff 0%, transparent 55%),\n    radial-gradient(120% 120% at 100% 20%, #fff7ed 0%, transparent 45%),\n    var(--bg);\n  font-family: 'Poppins', 'Noto Sans SC', 'PingFang SC', 'Microsoft YaHei', sans-serif;\n  color: var(--text);\n}\n\n.practice-summary {\n  margin: 16rpx 20rpx 0;\n}\n\n.summary-card {\n  background: var(--card);\n  border-radius: 18rpx;\n  padding: 22rpx 24rpx;\n  display: flex;\n  justify-content: space-between;\n  border: 1rpx solid var(--border);\n  box-shadow: var(--shadow-soft);\n}\n\n.summary-item {\n  flex: 1;\n  text-align: center;\n}\n\n.summary-number {\n  display: block;\n  font-size: 30rpx;\n  font-weight: 600;\n  color: var(--text);\n}\n\n.summary-label {\n  display: block;\n  margin-top: 6rpx;\n  font-size: 22rpx;\n  color: var(--muted);\n}\n\r\n/* é¡¶éƒ¨è¿›åº¦æ  */\r\n.exam-header {\n  background: var(--card);\n  box-shadow: 0 2rpx 12rpx rgba(15, 23, 42, 0.08);\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  padding-bottom: 20rpx;\n  border-bottom: 1rpx solid var(--border);\n}\n\r\n.header-content {\r\n  padding: 0 20rpx;\r\n}\r\n\r\n.header-info {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.header-info .back-btn {\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.back-btn {\n  width: 60rpx;\n  height: 60rpx;\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #e0e7ff;\n  border-radius: 50%;\n}\n\n.stats-btn {\n  width: 56rpx;\n  height: 56rpx;\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #dbeafe;\n  border-radius: 50%;\n  margin-left: 16rpx;\n}\n\r\n.exam-title {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.exam-title .title-text {\r\n  margin-bottom: 4rpx;\r\n}\r\n\r\n.title-text {\n  font-size: 30rpx;\n  font-weight: 600;\n  color: var(--text);\n}\n\n.subtitle-text {\n  font-size: 24rpx;\n  color: var(--muted);\n}\n\r\n.progress-container {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n\r\n.progress-container .progress-bar {\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.progress-container .progress-text {\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.progress-bar {\n  flex: 1;\n  height: 8rpx;\n  background: #e2e8f0;\n  border-radius: 4rpx;\n  overflow: hidden;\n}\n\n.progress-fill {\n  height: 100%;\n  background: linear-gradient(90deg, var(--primary) 0%, var(--primary-strong) 100%);\n  transition: width 0.3s ease;\n}\n\n.progress-text {\n  font-size: 24rpx;\n  color: var(--primary);\n  font-weight: 600;\n  min-width: 60rpx;\n  text-align: right;\n}\n\r\n/* åŠ è½½çŠ¶æ€ */\r\n.loading-state {\r\n  padding: 200rpx 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.loading-state .loading-icon {\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n.loading-icon {\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.loading-text {\r\n  font-size: 28rpx;\r\n  color: #999;\r\n}\r\n\r\n/* é¢˜ç›®å†…å®¹åŒ…è£¹å™¨ */\r\n.question-wrapper {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n/* å¯æ»šåŠ¨çš„é¢˜ç›®å†…å®¹åŒºåŸŸ - ä½¿ç”¨viewæ›¿ä»£scroll-view */\r\n.question-content {\r\n  flex: 1;\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 20rpx 24rpx;\r\n  box-sizing: border-box;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  /* éšè—æ»šåŠ¨æ¡ - å…¨å¹³å°å…¼å®¹ */\r\n  -webkit-overflow-scrolling: touch;\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n}\r\n\r\n/* éšè— WebKit å†…æ ¸æµè§ˆå™¨çš„æ»šåŠ¨æ¡ */\r\n.question-content::-webkit-scrollbar {\r\n  display: none !important;\r\n  width: 0 !important;\r\n  height: 0 !important;\r\n  background: transparent !important;\r\n}\r\n\r\n/* é¢˜ç›®å¡ç‰‡ */\r\n.question-card {\n  background: var(--card);\n  border-radius: 20rpx;\n  padding: 28rpx;\n  margin-bottom: 20rpx;\n  border: 1rpx solid var(--border);\n  box-shadow: var(--shadow-soft);\n  box-sizing: border-box;\n  width: 100%;\n}\n\r\n.question-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.question-type {\n  padding: 8rpx 20rpx;\n  border-radius: 20rpx;\n  background: #dbeafe;\n}\n\r\n.type-single {\r\n  background: #e3f2fd;\r\n}\r\n\r\n.type-multiple {\r\n  background: #fff3e0;\r\n}\r\n\r\n.type-judge {\r\n  background: #e8f5e9;\r\n}\r\n\r\n.type-fill {\r\n  background: #fce4ec;\r\n}\r\n\r\n.type-text {\n  font-size: 24rpx;\n  color: var(--primary-strong);\n}\n\r\n.question-difficulty {\r\n  display: flex;\r\n}\r\n\r\n.question-difficulty uni-icons {\r\n  margin-right: 4rpx;\r\n}\r\n\r\n.question-difficulty uni-icons:last-child {\r\n  margin-right: 0;\r\n}\r\n\r\n.question-number {\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.question-number text {\n  font-size: 26rpx;\n  color: var(--muted);\n}\n\r\n.question-text {\n  font-size: 30rpx;\n  line-height: 1.7;\n  color: var(--text);\n  margin-bottom: 16rpx;\n  font-weight: 500;\n}\n\n/* Markdown å†…å®¹åŸºç¡€æ ·å¼ */\n.question-text ::v-deep p,\n.explanation-text ::v-deep p {\n  margin: 0 0 12rpx;\n}\n\n.question-text ::v-deep p:last-child,\n.explanation-text ::v-deep p:last-child {\n  margin-bottom: 0;\n}\n\n.question-text ::v-deep ul,\n.question-text ::v-deep ol,\n.explanation-text ::v-deep ul,\n.explanation-text ::v-deep ol {\n  padding-left: 32rpx;\n  margin: 0 0 12rpx;\n}\n\n.question-text ::v-deep li,\n.explanation-text ::v-deep li {\n  margin-bottom: 6rpx;\n}\n\n.question-text ::v-deep .katex-display,\n.explanation-text ::v-deep .katex-display {\n  margin: 12rpx 0;\n}\n\n/* é¢˜ç›®å†…å®¹ä¸­çš„å›¾ç‰‡æ ·å¼ */\r\n.question-text ::v-deep img,\n.question-text ::v-deep image {\n  max-width: 100% !important;\n  width: auto !important;\n  height: auto !important;\n  border-radius: 12rpx;\n  margin: 24rpx auto;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.1);\n  display: block;\n  background: #f5f7fa;\n  border: 2rpx solid #e8eaed;\n  transition: all 0.3s ease;\n  object-fit: contain;\n}\n\r\n.question-text ::v-deep img:active,\r\n.question-text ::v-deep image:active {\r\n  transform: scale(0.98);\r\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.question-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin: -6rpx;\r\n}\r\n\r\n.question-tags .tag {\r\n  margin: 6rpx;\r\n}\r\n\r\n.tag {\n  padding: 6rpx 16rpx;\n  background: #f1f5f9;\n  border-radius: 8rpx;\n}\n\n.tag-text {\n  font-size: 22rpx;\n  color: var(--muted);\n}\n\r\n/* é€‰é¡¹åˆ—è¡¨ */\r\n.options-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 20rpx;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.options-list .option-item {\r\n  margin-bottom: 14rpx;\r\n}\r\n\r\n.options-list .option-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.option-item {\n  background: var(--card);\n  border: 2rpx solid var(--border);\n  border-radius: 16rpx;\n  padding: 20rpx 22rpx;\n  display: flex;\n  align-items: center;\n  transition: all 0.3s ease;\n  box-shadow: var(--shadow-soft);\n  box-sizing: border-box;\n  width: 100%;\n}\n\n.option-item.selected {\n  border-color: var(--primary);\n  background: #eff6ff;\n  box-shadow: 0 4rpx 12rpx rgba(59, 130, 246, 0.15);\n}\n\n.option-item.correct {\n  border-color: var(--success);\n  background: #ecfdf5;\n  box-shadow: 0 4rpx 12rpx rgba(34, 197, 94, 0.12);\n}\n\n.option-item.wrong {\n  border-color: var(--danger);\n  background: #fef2f2;\n  box-shadow: 0 4rpx 12rpx rgba(239, 68, 68, 0.12);\n}\n\r\n.option-item.disabled {\r\n  pointer-events: none;\r\n}\r\n\r\n.option-label {\n  width: 52rpx;\n  height: 52rpx;\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-strong) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  box-shadow: 0 2rpx 8rpx rgba(59, 130, 246, 0.25);\n  margin-right: 18rpx;\n}\n\r\n.option-item.correct .option-label {\n  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);\n}\n\n.option-item.wrong .option-label {\n  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\n}\n\r\n.label-text {\r\n  font-size: 28rpx;\r\n  font-weight: 700;\r\n  color: white;\r\n}\r\n\r\n.option-content {\r\n  flex: 1;\r\n  margin-right: 12rpx;\r\n}\r\n\r\n.option-text {\n  font-size: 28rpx;\n  line-height: 1.65;\n  color: var(--text);\n  font-weight: 400;\n}\n\r\n.option-icon {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.selected-dot {\n  width: 16rpx;\n  height: 16rpx;\n  background: var(--primary);\n  border-radius: 50%;\n}\n\r\n/* ç­”æ¡ˆè§£æ */\r\n.answer-section {\n  background: var(--card);\n  border-radius: 20rpx;\n  padding: 28rpx;\n  margin-bottom: 20rpx;\n  border: 1rpx solid var(--border);\n  box-shadow: var(--shadow-soft);\n  box-sizing: border-box;\n  width: 100%;\n}\n\r\n.answer-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20rpx;\n  padding-bottom: 16rpx;\n  border-bottom: 1rpx solid var(--border);\n}\n\r\n.answer-header uni-icons {\r\n  margin-right: 10rpx;\r\n}\r\n\r\n.answer-title {\n  font-size: 28rpx;\n  font-weight: 600;\n  color: var(--text);\n}\n\r\n.answer-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.answer-content>view {\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.answer-content>view:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.answer-row {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.answer-label {\n  font-size: 26rpx;\n  color: var(--muted);\n  min-width: 150rpx;\n}\n\r\n.answer-value {\r\n  font-size: 26rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.answer-value.correct {\n  color: var(--success);\n}\n\n.answer-value.wrong {\n  color: var(--danger);\n}\n\r\n.explanation {\n  background: #f8fafc;\n  padding: 20rpx;\n  border-radius: 10rpx;\n  margin-top: 6rpx;\n}\n\r\n.explanation-label {\n  font-size: 26rpx;\n  font-weight: 600;\n  color: var(--text);\n  display: block;\n  margin-bottom: 10rpx;\n}\n\r\n.explanation-text {\n  font-size: 25rpx;\n  line-height: 1.7;\n  color: var(--muted);\n}\n\r\n/* è§£æå†…å®¹ä¸­çš„å›¾ç‰‡æ ·å¼ */\r\n.explanation ::v-deep img,\n.explanation ::v-deep image {\n  max-width: 100% !important;\n  width: auto !important;\n  height: auto !important;\n  border-radius: 10rpx;\n  margin: 16rpx auto;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.08);\n  display: block;\n  background: #fafafa;\n  border: 1rpx solid #e0e0e0;\n  transition: all 0.3s ease;\n  object-fit: contain;\n}\n\r\n.explanation ::v-deep img:active,\r\n.explanation ::v-deep image:active {\r\n  transform: scale(0.98);\r\n  box-shadow: 0 1rpx 6rpx rgba(0, 0, 0, 0.06);\r\n}\r\n\r\n/* æ“ä½œæŒ‰é’® - å›ºå®šåœ¨åº•éƒ¨ */\r\n.action-buttons {\n  display: flex;\n  padding: 12rpx 24rpx 24rpx;\n  background: var(--card);\n  box-shadow: 0 -2rpx 16rpx rgba(15, 23, 42, 0.08);\n  flex-shrink: 0;\n  border-top: 1rpx solid var(--border);\n}\n\r\n.action-buttons .action-btn {\r\n  margin-right: 10rpx;\r\n}\r\n\r\n.action-buttons .action-btn:last-child {\r\n  margin-right: 0;\r\n}\r\n\r\n.action-btn {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 16rpx 14rpx;\r\n  border-radius: 14rpx;\r\n  font-size: 24rpx;\r\n  font-weight: 600;\r\n  border: none;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.action-btn uni-icons {\r\n  margin-right: 6rpx;\r\n}\r\n\r\n.action-btn .btn-text+uni-icons {\r\n  margin-right: 0;\r\n  margin-left: 6rpx;\r\n}\r\n\r\n.action-btn.secondary {\n  background: linear-gradient(135deg, #475569 0%, #334155 100%);\n  color: white;\n}\n\r\n.action-btn.secondary:disabled {\n  background: #e2e8f0 !important;\n  color: #94a3b8 !important;\n  box-shadow: none;\n}\n\r\n.action-btn.primary {\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-strong) 100%);\n  color: white;\n  flex: 1.4;\n}\n\n.action-btn.finish {\n  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);\n  color: white;\n}\n\r\n.action-btn .btn-text {\r\n  font-size: 24rpx;\r\n  font-weight: 600;\r\n  line-height: 1;\r\n}\r\n\r\n/* ç»Ÿè®¡å¼¹çª— */\r\n.stats-popup {\n  width: 640rpx;\n  background: var(--card);\n  border-radius: 24rpx;\n  padding: 32rpx;\n  border: 1rpx solid var(--border);\n  box-shadow: var(--shadow);\n}\n\r\n.popup-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 32rpx;\r\n}\r\n\r\n.popup-title {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: var(--text);\n}\n\r\n.close-btn {\r\n  width: 48rpx;\r\n  height: 48rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.stats-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.stats-content>view {\r\n  margin-bottom: 32rpx;\r\n}\r\n\r\n.stats-content>view:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.stat-row {\r\n  display: flex;\r\n  justify-content: space-around;\r\n}\r\n\r\n.stat-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.stat-item .stat-number {\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.stat-number {\r\n  font-size: 48rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.stat-number.primary {\n  color: var(--primary);\n}\n\n.stat-number.success {\n  color: var(--success);\n}\n\n.stat-number.danger {\n  color: var(--danger);\n}\n\r\n.stat-label {\n  font-size: 24rpx;\n  color: var(--muted);\n}\n\r\n.accuracy-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24rpx;\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-strong) 100%);\n  border-radius: 16rpx;\n}\n\r\n.accuracy-label {\r\n  font-size: 28rpx;\r\n  color: white;\r\n}\r\n\r\n.accuracy-value {\r\n  font-size: 40rpx;\r\n  font-weight: bold;\r\n  color: white;\r\n}\r\n\r\n.stats-note {\n  padding: 20rpx;\n  background: #f1f5f9;\n  border-radius: 12rpx;\n  text-align: center;\n}\n\n.note-text {\n  font-size: 24rpx;\n  color: var(--muted);\n}\n\r\n.question-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(8, 1fr);\r\n  grid-gap: 16rpx;\r\n}\r\n\r\n.grid-item {\r\n  aspect-ratio: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #f5f7fa;\r\n  border-radius: 8rpx;\r\n  border: 2rpx solid transparent;\r\n}\r\n\r\n.grid-item.current {\n  border-color: var(--primary);\n  background: #dbeafe;\n}\n\r\n.grid-item.answered {\r\n  background: #e0e0e0;\r\n}\r\n\r\n.grid-item.correct {\n  background: #dcfce7;\n  color: var(--success);\n}\n\n.grid-item.wrong {\n  background: #fee2e2;\n  color: var(--danger);\n}\n\r\n.grid-number {\r\n  font-size: 24rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.popup-buttons {\r\n  display: flex;\r\n  margin-top: 16rpx;\r\n}\r\n\r\n.popup-buttons .popup-btn {\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.popup-buttons .popup-btn:last-child {\r\n  margin-right: 0;\r\n}\r\n\r\n.popup-btn {\r\n  flex: 1;\r\n  border: none;\r\n  padding: 28rpx;\r\n  border-radius: 16rpx;\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.popup-btn.primary {\n  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-strong) 100%);\n  color: white;\n}\n\n.popup-btn.secondary {\n  background: #f1f5f9;\n  color: var(--text);\n}\n</style>\r\n","import MiniProgramPage from 'E:/personal/wx/uni-ui/pages/exam/exam.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","chapterName","API_CONFIG","parseQuestionImages","extractAllQuestionImages","onMounted","uni","onUnmounted","watch","get","post","del"],"mappings":"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"}