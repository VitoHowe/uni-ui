{"version":3,"file":"word-practice.js","sources":["pages/word-practice/word-practice.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd29yZC1wcmFjdGljZS93b3JkLXByYWN0aWNlLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"word-hub\">\r\n    <view class=\"hero-card\">\r\n      <view class=\"hero-top\">\r\n        <view>\r\n          <text class=\"hero-badge\">Vocabulary Hub</text>\r\n          <text class=\"hero-title\">智能记忆控制台</text>\r\n          <text class=\"hero-desc\">集中管理词书、收藏与错词，保持高效复习节奏。</text>\r\n        </view>\r\n        <button class=\"hero-switch\" @click=\"openSelector\">切换默认词书</button>\r\n      </view>\r\n      <view class=\"hero-stats\">\r\n        <view class=\"hero-stat\" v-for=\"stat in heroStats\" :key=\"stat.label\">\r\n          <text class=\"stat-value\">{{ stat.value }}</text>\r\n          <text class=\"stat-label\">{{ stat.label }}</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"section\">\r\n      <view class=\"section-head\">\r\n        <view>\r\n          <text class=\"section-title\">单词本</text>\r\n          <text class=\"section-sub\">共 {{ store.books.length }} 本 · 选择任意一本进入练习</text>\r\n        </view>\r\n      </view>\r\n      <view v-if=\"store.booksLoading\" class=\"section-loading\">加载中...</view>\r\n      <view v-else-if=\"!store.books.length\" class=\"section-empty\">\r\n        <uni-icons type=\"info\" size=\"32\" color=\"#94a3b8\" />\r\n        <text>暂无单词书，请先上传或从后台同步。</text>\r\n      </view>\r\n      <view v-else class=\"book-grid\">\r\n        <view class=\"book-card\" v-for=\"book in store.books\" :key=\"book.id\">\r\n          <view class=\"book-card__header\">\r\n            <text class=\"book-name\">{{ book.name }}</text>\r\n            <text class=\"book-meta\">{{ formatWords(book.totalWords) }} 词</text>\r\n          </view>\r\n          <text class=\"book-desc\">{{ book.description || '暂无简介，立即开启学习。' }}</text>\r\n          <view class=\"book-tags\">\r\n            <text class=\"tag\">{{ book.language || 'unk' }}</text>\r\n            <text class=\"tag ghost\">创建于 {{ formatDate(book.createdAt) }}</text>\r\n          </view>\r\n          <view class=\"book-actions\">\r\n            <button class=\"ghost-btn\" @click=\"previewBook(book)\">设为当前</button>\r\n            <button class=\"primary-btn\" @click=\"goPractice(book.id)\">进入练习</button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"section glass\">\r\n      <view class=\"section-head\">\r\n        <view>\r\n          <text class=\"section-title\">收藏夹</text>\r\n          <text class=\"section-sub\">当前词书 · {{ currentBookName }}</text>\r\n        </view>\r\n        <text class=\"section-pill\">{{ favoriteCount }} 词</text>\r\n      </view>\r\n      <view class=\"highlight\">\r\n        <text class=\"highlight-count\">{{ favoriteCount }}</text>\r\n        <text class=\"highlight-note\">\r\n          {{ favoriteCount ? '已收藏词条，进入练习可查看详情' : '还没有收藏，进入词书即可收藏' }}\r\n        </text>\r\n      </view>\r\n      <button class=\"section-btn\" @click=\"goPractice(store.selectedBookId)\">前往练习</button>\r\n    </view>\r\n\r\n    <view class=\"section glass\">\r\n      <view class=\"section-head\">\r\n        <view>\r\n          <text class=\"section-title\">错词复习</text>\r\n          <text class=\"section-sub\">自动记录需要复盘的词汇</text>\r\n        </view>\r\n        <text class=\"section-pill warm\">{{ mistakeCount }} 词</text>\r\n      </view>\r\n      <view class=\"highlight warm\">\r\n        <text class=\"highlight-count\">{{ mistakeCount }}</text>\r\n        <text class=\"highlight-note\">\r\n          {{ mistakeCount ? '存在待复习词汇，进入词书即可开始复盘' : '暂时没有错词，保持学习节奏' }}\r\n        </text>\r\n      </view>\r\n      <button class=\"section-btn warm\" @click=\"goPractice(store.selectedBookId)\">开始复习</button>\r\n    </view>\r\n\r\n    <WordBookSelector\r\n      :visible=\"selectorVisible\"\r\n      :books=\"store.books\"\r\n      :selected-book-id=\"store.selectedBookId\"\r\n      :loading=\"store.booksLoading\"\r\n      @close=\"selectorVisible = false\"\r\n      @select=\"handleSelectBook\"\r\n    />\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref, onMounted } from 'vue'\r\nimport { useWordPracticeStore } from '@/stores/wordPractice.js'\r\nimport WordBookSelector from '@/components/word-practice/WordBookSelector.vue'\r\n\r\nconst store = useWordPracticeStore()\r\nconst selectorVisible = ref(false)\r\n\r\nconst progressSnapshot = computed(() => store.currentProgress)\r\n\r\nconst heroStats = computed(() => [\r\n  { label: '词书', value: store.books.length },\r\n  { label: '收藏', value: progressSnapshot.value.favorites.length },\r\n  { label: '错词', value: progressSnapshot.value.mistakes.length }\r\n])\r\n\r\nconst currentBookName = computed(() => store.currentBook?.name || '未选择')\r\nconst favoriteCount = computed(() => progressSnapshot.value.favorites.length)\r\nconst mistakeCount = computed(() => progressSnapshot.value.mistakes.length)\r\n\r\nconst ensureInitialData = async () => {\r\n  if (!store.books.length) {\r\n    await store.loadBooks()\r\n  }\r\n  if (!store.selectedBookId && store.books.length) {\r\n    await store.selectBook(store.books[0].id, { preloadWords: false })\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  ensureInitialData()\r\n})\r\n\r\nconst openSelector = () => {\r\n  selectorVisible.value = true\r\n}\r\n\r\nconst handleSelectBook = async (book) => {\r\n  if (!book) return\r\n  await store.selectBook(book.id, { preloadWords: false })\r\n  selectorVisible.value = false\r\n}\r\n\r\nconst previewBook = async (book) => {\r\n  await store.selectBook(book.id, { preloadWords: false })\r\n  selectorVisible.value = false\r\n  uni.showToast({ title: `已切换至 ${book.name}`, icon: 'none' })\r\n}\r\n\r\nconst goPractice = (bookId) => {\r\n  const target = bookId || store.selectedBookId\r\n  if (!target) {\r\n    uni.showToast({ title: '请先选择词书', icon: 'none' })\r\n    return\r\n  }\r\n  uni.navigateTo({ url: `/pages/word-practice/word-detail?bookId=${target}` })\r\n}\r\n\r\nconst formatWords = (count = 0) => count.toLocaleString()\r\nconst formatDate = (value) => {\r\n  if (!value) return '刚刚'\r\n  return new Date(value).toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' })\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.word-hub {\r\n  min-height: 100vh;\r\n  padding: 30rpx 24rpx 80rpx;\r\n  background: linear-gradient(180deg, #f9fbff 0%, #f1f4ff 40%, #fdf9ff 100%);\r\n}\r\n\r\n.hero-card {\r\n  border-radius: 36rpx;\r\n  padding: 42rpx 32rpx;\r\n  background: radial-gradient(circle at top right, rgba(149, 114, 252, 0.6), rgba(79, 70, 229, 0.95));\r\n  color: #fff;\r\n  box-shadow: 0 30rpx 60rpx rgba(79, 70, 229, 0.35);\r\n  margin-bottom: 32rpx;\r\n}\r\n\r\n.hero-top {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 20rpx;\r\n}\r\n\r\n.hero-badge {\r\n  font-size: 24rpx;\r\n  letter-spacing: 4rpx;\r\n  text-transform: uppercase;\r\n  opacity: 0.75;\r\n}\r\n\r\n.hero-title {\r\n  display: block;\r\n  margin-top: 12rpx;\r\n  font-size: 48rpx;\r\n  font-weight: 700;\r\n}\r\n\r\n.hero-desc {\r\n  display: block;\r\n  margin-top: 10rpx;\r\n  font-size: 26rpx;\r\n  opacity: 0.9;\r\n}\r\n\r\n.hero-switch {\r\n  height: fit-content;\r\n  border: none;\r\n  border-radius: 999rpx;\r\n  padding: 14rpx 24rpx;\r\n  font-size: 26rpx;\r\n  color: #1d4ed8;\r\n  background: #fff;\r\n}\r\n\r\n.hero-stats {\r\n  display: flex;\r\n  gap: 16rpx;\r\n  margin-top: 28rpx;\r\n}\r\n\r\n.hero-stat {\r\n  flex: 1;\r\n  padding: 20rpx;\r\n  border-radius: 20rpx;\r\n  background: rgba(255, 255, 255, 0.22);\r\n  text-align: center;\r\n}\r\n\r\n.stat-value {\r\n  font-size: 36rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.stat-label {\r\n  display: block;\r\n  margin-top: 6rpx;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.section {\r\n  margin-bottom: 30rpx;\r\n  padding: 26rpx 24rpx;\r\n  border-radius: 28rpx;\r\n  background: #fff;\r\n  box-shadow: 0 20rpx 40rpx rgba(15, 23, 42, 0.08);\r\n}\r\n\r\n.section.glass {\r\n  background: rgba(255, 255, 255, 0.8);\r\n  backdrop-filter: blur(20rpx);\r\n}\r\n\r\n.section-head {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.section-title {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  color: #0f172a;\r\n}\r\n\r\n.section-sub {\r\n  display: block;\r\n  margin-top: 6rpx;\r\n  font-size: 24rpx;\r\n  color: #6b7280;\r\n}\r\n\r\n.section-pill {\r\n  padding: 10rpx 22rpx;\r\n  border-radius: 999rpx;\r\n  background: #eef2ff;\r\n  color: #4338ca;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.section-pill.warm {\r\n  background: #fff5f5;\r\n  color: #b91c1c;\r\n}\r\n\r\n.section-loading,\r\n.section-empty {\r\n  min-height: 140rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12rpx;\r\n  color: #9ca3af;\r\n}\r\n\r\n.book-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 18rpx;\r\n}\r\n\r\n.book-card {\r\n  border-radius: 24rpx;\r\n  padding: 24rpx;\r\n  background: linear-gradient(135deg, #ffffff, #f4f6ff);\r\n  border: 1px solid #eef2ff;\r\n}\r\n\r\n.book-card__header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: baseline;\r\n}\r\n\r\n.book-name {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  color: #111827;\r\n}\r\n\r\n.book-meta {\r\n  font-size: 24rpx;\r\n  color: #6b7280;\r\n}\r\n\r\n.book-desc {\r\n  display: block;\r\n  margin-top: 10rpx;\r\n  font-size: 26rpx;\r\n  color: #4b5563;\r\n}\r\n\r\n.book-tags {\r\n  display: flex;\r\n  gap: 12rpx;\r\n  margin-top: 14rpx;\r\n}\r\n\r\n.tag {\r\n  padding: 8rpx 18rpx;\r\n  border-radius: 999rpx;\r\n  background: #e0e7ff;\r\n  color: #4338ca;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.tag.ghost {\r\n  background: #f1f5f9;\r\n  color: #475569;\r\n}\r\n\r\n.book-actions {\r\n  display: flex;\r\n  gap: 16rpx;\r\n  margin-top: 20rpx;\r\n}\r\n\r\n.ghost-btn,\r\n.primary-btn,\r\n.section-btn {\r\n  flex: 1;\r\n  border-radius: 16rpx;\r\n  padding: 18rpx 0;\r\n  font-size: 28rpx;\r\n  border: none;\r\n}\r\n\r\n.ghost-btn {\r\n  background: #eef2ff;\r\n  color: #1d4ed8;\r\n}\r\n\r\n.primary-btn,\r\n.section-btn {\r\n  background: linear-gradient(135deg, #4f46e5, #7c3aed);\r\n  color: #fff;\r\n}\r\n\r\n.section-btn.warm {\r\n  background: linear-gradient(135deg, #f97316, #fb7185);\r\n}\r\n\r\n.highlight {\r\n  border-radius: 22rpx;\r\n  padding: 20rpx;\r\n  background: #f7f8ff;\r\n  margin-bottom: 18rpx;\r\n}\r\n\r\n.highlight.warm {\r\n  background: #fff4f4;\r\n}\r\n\r\n.highlight-count {\r\n  font-size: 40rpx;\r\n  font-weight: 700;\r\n  color: #111827;\r\n}\r\n\r\n.highlight-note {\r\n  display: block;\r\n  margin-top: 8rpx;\r\n  font-size: 24rpx;\r\n  color: #6b7280;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/personal/wx/uni-ui/pages/word-practice/word-practice.vue'\nwx.createPage(MiniProgramPage)"],"names":["useWordPracticeStore","ref","computed","onMounted","uni"],"mappings":";;;;;;;;;;;AAkGA,MAAM,mBAAmB,MAAW;;;;AAEpC,UAAM,QAAQA,oBAAAA,qBAAsB;AACpC,UAAM,kBAAkBC,cAAG,IAAC,KAAK;AAEjC,UAAM,mBAAmBC,cAAQ,SAAC,MAAM,MAAM,eAAe;AAE7D,UAAM,YAAYA,cAAQ,SAAC,MAAM;AAAA,MAC/B,EAAE,OAAO,MAAM,OAAO,MAAM,MAAM,OAAQ;AAAA,MAC1C,EAAE,OAAO,MAAM,OAAO,iBAAiB,MAAM,UAAU,OAAQ;AAAA,MAC/D,EAAE,OAAO,MAAM,OAAO,iBAAiB,MAAM,SAAS,OAAQ;AAAA,IAChE,CAAC;AAED,UAAM,kBAAkBA,cAAQ,SAAC,MAAM;;AAAA,0BAAM,gBAAN,mBAAmB,SAAQ;AAAA,KAAK;AACvE,UAAM,gBAAgBA,cAAQ,SAAC,MAAM,iBAAiB,MAAM,UAAU,MAAM;AAC5E,UAAM,eAAeA,cAAQ,SAAC,MAAM,iBAAiB,MAAM,SAAS,MAAM;AAE1E,UAAM,oBAAoB,YAAY;AACpC,UAAI,CAAC,MAAM,MAAM,QAAQ;AACvB,cAAM,MAAM,UAAW;AAAA,MACxB;AACD,UAAI,CAAC,MAAM,kBAAkB,MAAM,MAAM,QAAQ;AAC/C,cAAM,MAAM,WAAW,MAAM,MAAM,CAAC,EAAE,IAAI,EAAE,cAAc,OAAO;AAAA,MAClE;AAAA,IACH;AAEAC,kBAAAA,UAAU,MAAM;AACd,wBAAmB;AAAA,IACrB,CAAC;AAED,UAAM,eAAe,MAAM;AACzB,sBAAgB,QAAQ;AAAA,IAC1B;AAEA,UAAM,mBAAmB,OAAO,SAAS;AACvC,UAAI,CAAC;AAAM;AACX,YAAM,MAAM,WAAW,KAAK,IAAI,EAAE,cAAc,OAAO;AACvD,sBAAgB,QAAQ;AAAA,IAC1B;AAEA,UAAM,cAAc,OAAO,SAAS;AAClC,YAAM,MAAM,WAAW,KAAK,IAAI,EAAE,cAAc,OAAO;AACvD,sBAAgB,QAAQ;AACxBC,oBAAAA,MAAI,UAAU,EAAE,OAAO,QAAQ,KAAK,IAAI,IAAI,MAAM,QAAQ;AAAA,IAC5D;AAEA,UAAM,aAAa,CAAC,WAAW;AAC7B,YAAM,SAAS,UAAU,MAAM;AAC/B,UAAI,CAAC,QAAQ;AACXA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAC/C;AAAA,MACD;AACDA,oBAAG,MAAC,WAAW,EAAE,KAAK,2CAA2C,MAAM,IAAI;AAAA,IAC7E;AAEA,UAAM,cAAc,CAAC,QAAQ,MAAM,MAAM,eAAgB;AACzD,UAAM,aAAa,CAAC,UAAU;AAC5B,UAAI,CAAC;AAAO,eAAO;AACnB,aAAO,IAAI,KAAK,KAAK,EAAE,mBAAmB,SAAS,EAAE,OAAO,SAAS,KAAK,WAAW;AAAA,IACvF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5JA,GAAG,WAAW,eAAe;"}