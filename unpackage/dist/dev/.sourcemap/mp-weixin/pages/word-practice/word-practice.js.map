{"version":3,"file":"word-practice.js","sources":["pages/word-practice/word-practice.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd29yZC1wcmFjdGljZS93b3JkLXByYWN0aWNlLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"word-hub\">\r\n    <view class=\"hero-card\">\r\n      <view class=\"hero-head\">\r\n        <view>\r\n          <text class=\"hero-title\">单词练习中心</text>\r\n          <text class=\"hero-subtitle\">\r\n            {{ selectedBook ? selectedBook.name : '请选择单词书' }}\r\n          </text>\r\n        </view>\r\n        <view class=\"hero-actions\">\r\n          <view class=\"hero-chip\" @click=\"openBookPicker\">\r\n            <uni-icons type=\"arrowdown\" size=\"16\" color=\"#0f62fe\" />\r\n            <text>切换单词书</text>\r\n          </view>\r\n          <view class=\"hero-chip ghost\" @click=\"openListDrawer\">\r\n            <uni-icons type=\"list\" size=\"16\" color=\"#0f62fe\" />\r\n            <text>查看列表</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view class=\"hero-stats\">\r\n        <view class=\"stat\" v-for=\"stat in summaryStats\" :key=\"stat.label\">\r\n          <text class=\"stat-value\">{{ stat.value }}</text>\r\n          <text class=\"stat-label\">{{ stat.label }}</text>\r\n        </view>\r\n      </view>\r\n      <view class=\"progress-line\">\r\n        <uni-progress :percent=\"learningRate\" color=\"#0f62fe\" active stroke-width=\"8\" />\r\n        <text class=\"progress-text\">进度 {{ learningRate }}%</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"section-card\">\r\n      <view class=\"section-head\">\r\n        <text class=\"section-title\">单词书分类</text>\r\n        <view class=\"section-tip\">挑选想练的词书，支持上传后台导入的词书</view>\r\n      </view>\r\n      <scroll-view scroll-x class=\"book-scroll\" v-if=\"state.wordBooks.length\">\r\n        <view\r\n          class=\"book-card\"\r\n          v-for=\"book in state.wordBooks\"\r\n          :key=\"book.id\"\r\n          :class=\"{ active: selectedBook && selectedBook.id === book.id }\"\r\n          @click=\"selectBook(book)\"\r\n        >\r\n          <text class=\"book-name\">{{ book.name }}</text>\r\n          <text class=\"book-meta\">{{ book.total_words || book.total || 0 }} 词</text>\r\n        </view>\r\n      </scroll-view>\r\n      <view v-else class=\"empty-block\">\r\n        <uni-icons type=\"info\" size=\"24\" color=\"#8c8c8c\" />\r\n        <text>暂无词书，请先在后台上传词书</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"section-card\">\r\n      <view class=\"section-head\">\r\n        <text class=\"section-title\">练习模式</text>\r\n        <view class=\"pill-group\">\r\n          <view\r\n            class=\"pill\"\r\n            v-for=\"mode in practiceModes\"\r\n            :key=\"mode.value\"\r\n            :class=\"{ active: state.practiceFilter === mode.value }\"\r\n            @click=\"changePracticeFilter(mode.value)\"\r\n          >\r\n            {{ mode.label }}\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <view class=\"mode-actions\">\r\n        <view class=\"mode-btn primary\" @click=\"jumpRandom\">\r\n          <uni-icons type=\"loop\" size=\"18\" color=\"#fff\" />\r\n          <text>随机一词</text>\r\n        </view>\r\n        <view class=\"mode-btn ghost\" @click=\"openListDrawer\">\r\n          <uni-icons type=\"list\" size=\"18\" color=\"#0f62fe\" />\r\n          <text>查看单词列表</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"section-card word-card\" v-if=\"currentWord\">\r\n      <view class=\"word-head\">\r\n        <view>\r\n          <text class=\"word-text\">{{ currentWord.word }}</text>\r\n          <text class=\"word-phonetic\" v-if=\"currentWord.phonetic\">/{{ currentWord.phonetic }}/</text>\r\n          <text class=\"word-translation\">{{ currentWord.translation }}</text>\r\n        </view>\r\n        <view class=\"word-tag\">#{{ currentWord.order_index }}</view>\r\n      </view>\r\n\r\n      <view class=\"word-actions\">\r\n        <view class=\"action-chip\" @click=\"playPronunciation\">\r\n          <uni-icons type=\"sound\" size=\"18\" color=\"#fff\" />\r\n          <text>发音</text>\r\n        </view>\r\n        <view\r\n          class=\"action-chip\"\r\n          :class=\"{ warn: currentWord.is_favorite }\"\r\n          @click=\"toggleFavorite(currentWord)\"\r\n        >\r\n          <uni-icons type=\"star\" size=\"18\" :color=\"currentWord.is_favorite ? '#fff' : '#fff'\" />\r\n          <text>{{ currentWord.is_favorite ? '已收藏' : '收藏' }}</text>\r\n        </view>\r\n        <view class=\"action-chip\" @click=\"markWord('mastered')\">\r\n          <uni-icons type=\"checkmarkempty\" size=\"18\" color=\"#fff\" />\r\n          <text>掌握</text>\r\n        </view>\r\n        <view class=\"action-chip\" @click=\"markWord('review')\">\r\n          <uni-icons type=\"refresh\" size=\"18\" color=\"#fff\" />\r\n          <text>复习</text>\r\n        </view>\r\n        <view class=\"action-chip danger\" @click=\"markWrong\">\r\n          <uni-icons type=\"closeempty\" size=\"18\" color=\"#fff\" />\r\n          <text>标记错题</text>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"meta-row\">\r\n        <text>进度：{{ practicePosition }}</text>\r\n        <text>状态：{{ masteryLabel(currentWord.status) }}</text>\r\n      </view>\r\n      <view class=\"meta-row\" v-if=\"pronunciationState.error\">\r\n        <text class=\"error-text\">{{ pronunciationState.error }}</text>\r\n      </view>\r\n\r\n      <view class=\"navigation\">\r\n        <view class=\"nav-btn ghost\" @click=\"switchWord('prev')\">上一词</view>\r\n        <view class=\"nav-btn primary\" @click=\"switchWord('next')\">下一词</view>\r\n      </view>\r\n    </view>\r\n    <view v-else class=\"empty-block\">\r\n      <uni-icons type=\"info\" size=\"28\" color=\"#8c8c8c\" />\r\n      <text>暂无可练单词，请切换单词书或添加数据</text>\r\n    </view>\r\n\r\n    <uni-popup ref=\"drawerRef\" type=\"bottom\" :mask-click=\"true\" @change=\"onDrawerChange\">\r\n      <view class=\"drawer-panel\">\r\n        <view class=\"drawer-header\">\r\n          <text class=\"drawer-title\">单词列表</text>\r\n          <view class=\"drawer-close\" @click=\"closeListDrawer\">\r\n            <uni-icons type=\"closeempty\" size=\"18\" color=\"#4b5563\" />\r\n          </view>\r\n        </view>\r\n        <view class=\"drawer-subtitle\">点击可跳转当前练习 · 分页加载避免卡顿</view>\r\n        <scroll-view\r\n          scroll-y\r\n          class=\"drawer-scroll\"\r\n          :lower-threshold=\"60\"\r\n          @scrolltolower=\"loadMoreDrawer\"\r\n        >\r\n          <uni-list>\r\n            <uni-list-item\r\n              v-for=\"word in drawerState.list\"\r\n              :key=\"word.id\"\r\n              :title=\"word.word\"\r\n              :note=\"word.translation\"\r\n              :rightText=\"masteryLabel(word.status)\"\r\n              clickable\r\n              @click=\"jumpToWord(word.id)\"\r\n            >\r\n              <template v-slot:header>\r\n                <view class=\"list-icon\" :class=\"{ fav: word.is_favorite }\">\r\n                  <uni-icons :type=\"word.is_favorite ? 'star' : 'sound'\" size=\"18\" color=\"#fff\" />\r\n                </view>\r\n              </template>\r\n            </uni-list-item>\r\n          </uni-list>\r\n          <view class=\"drawer-footer\">\r\n            <view v-if=\"drawerState.loading\" class=\"drawer-tip\">加载中...</view>\r\n            <view v-else-if=\"drawerState.finished\" class=\"drawer-tip\">已加载全部</view>\r\n            <view v-else class=\"drawer-tip\">上拉加载更多</view>\r\n          </view>\r\n        </scroll-view>\r\n      </view>\r\n    </uni-popup>\r\n\r\n    <view class=\"section-card\">\r\n      <view class=\"section-head\">\r\n        <text class=\"section-title\">收藏夹</text>\r\n        <text class=\"section-tip\">优先复习已收藏单词</text>\r\n      </view>\r\n      <view v-if=\"favoriteWords.length\" class=\"chip-list\">\r\n        <view class=\"chip\" v-for=\"word in favoriteWords\" :key=\"word.id\" @click=\"jumpToWord(word.id)\">\r\n          <text class=\"chip-title\">{{ word.word }}</text>\r\n          <text class=\"chip-desc\">{{ word.translation }}</text>\r\n        </view>\r\n      </view>\r\n      <view v-else class=\"empty-block\">\r\n        <uni-icons type=\"star\" size=\"24\" color=\"#f7b500\" />\r\n        <text>暂无收藏，练习时点击收藏按钮即可加入</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"section-card\">\r\n      <view class=\"section-head\">\r\n        <text class=\"section-title\">错题本</text>\r\n        <text class=\"section-tip\">标记错题可优先复习</text>\r\n      </view>\r\n      <view v-if=\"wrongWords.length\" class=\"chip-list\">\r\n        <view class=\"chip danger\" v-for=\"word in wrongWords\" :key=\"word.id\" @click=\"jumpToWord(word.id)\">\r\n          <text class=\"chip-title\">{{ word.word }}</text>\r\n          <text class=\"chip-desc\">{{ word.translation }}</text>\r\n        </view>\r\n      </view>\r\n      <view v-else class=\"empty-block\">\r\n        <uni-icons type=\"closeempty\" size=\"24\" color=\"#ff6b6b\" />\r\n        <text>暂无错题，练习中点击“标记错题”即可记录</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed, onMounted, onUnmounted } from 'vue'\r\nimport request from '@/utils/request.js'\r\nimport { API_ENDPOINTS } from '@/utils/constants.js'\r\n\r\nconst state = reactive({\r\n  wordBooks: [],\r\n  selectedBook: null,\r\n  words: [],\r\n  summary: {\r\n    total: 0,\r\n    mastered: 0,\r\n    review: 0,\r\n    favorites: 0,\r\n    wrongs: 0,\r\n    last_word_entry_id: null,\r\n    last_word_order_index: null\r\n  },\r\n  practiceFilter: 'all',\r\n  paging: {\r\n    page: 1,\r\n    limit: 50,\r\n    total: 0,\r\n    loading: false,\r\n    finished: false\r\n  }\r\n})\r\n\r\nconst drawerState = reactive({\r\n  visible: false,\r\n  list: [],\r\n  page: 1,\r\n  limit: 50,\r\n  total: 0,\r\n  loading: false,\r\n  finished: false\r\n})\r\n\r\nconst currentIndex = ref(0)\r\nconst pronunciationState = reactive({\r\n  loading: false,\r\n  error: ''\r\n})\r\nlet audioContext = null\r\nconst drawerRef = ref(null)\r\n\r\nconst practiceModes = [\r\n  { label: '全部', value: 'all' },\r\n  { label: '收藏', value: 'favorite' },\r\n  { label: '错题', value: 'wrong' }\r\n]\r\n\r\nconst practiceList = computed(() => {\r\n  if (state.practiceFilter === 'favorite') {\r\n    return state.words.filter((item) => item.is_favorite)\r\n  }\r\n  if (state.practiceFilter === 'wrong') {\r\n    return state.words.filter((item) => item.wrong_count > 0)\r\n  }\r\n  return state.words\r\n})\r\n\r\nconst currentWord = computed(() => {\r\n  if (!practiceList.value.length) return null\r\n  const idx = Math.min(currentIndex.value, practiceList.value.length - 1)\r\n  return practiceList.value[idx]\r\n})\r\n\r\nconst favoriteWords = computed(() => state.words.filter((item) => item.is_favorite))\r\nconst wrongWords = computed(() => state.words.filter((item) => item.wrong_count > 0))\r\n\r\nconst learningRate = computed(() => {\r\n  if (!state.summary.total) return 0\r\n  return Math.round((state.summary.mastered / state.summary.total) * 100)\r\n})\r\n\r\nconst summaryStats = computed(() => [\r\n  { label: '词书总量', value: state.summary.total },\r\n  { label: '已掌握', value: state.summary.mastered },\r\n  { label: '待复习', value: state.summary.review },\r\n  { label: '收藏', value: state.summary.favorites }\r\n])\r\n\r\nconst practicePosition = computed(() => {\r\n  if (!currentWord.value || !practiceList.value.length) return '-- / --'\r\n  return `${currentIndex.value + 1} / ${practiceList.value.length}`\r\n})\r\n\r\nconst masteryLabel = (status) => {\r\n  if (status === 'mastered') return '已掌握'\r\n  if (status === 'review') return '待复习'\r\n  return '未学习'\r\n}\r\n\r\nconst openBookPicker = () => {\r\n  uni.showActionSheet({\r\n    itemList: state.wordBooks.map((b) => b.name),\r\n    success: (res) => {\r\n      const book = state.wordBooks[res.tapIndex]\r\n      if (book) selectBook(book)\r\n    }\r\n  })\r\n}\r\n\r\nconst fetchBooks = async () => {\r\n  try {\r\n    const res = await request.get(API_ENDPOINTS.WORD.BOOKS, { limit: 50 }, { showLoading: false })\r\n    const books = res?.books || res?.data || res || []\r\n    state.wordBooks = books\r\n    if (!state.selectedBook && books.length) {\r\n      selectBook(books[0])\r\n    }\r\n  } catch (error) {\r\n    console.error('获取单词书失败', error)\r\n    uni.showToast({ title: '获取单词书失败', icon: 'none' })\r\n  }\r\n}\r\n\r\nconst selectBook = async (book) => {\r\n  state.selectedBook = book\r\n  currentIndex.value = 0\r\n  await loadBookData()\r\n}\r\n\r\n// 抽屉列表分页\r\nconst openListDrawer = async () => {\r\n  drawerRef.value?.open()\r\n  drawerState.visible = true\r\n  if (!drawerState.list.length) {\r\n    await loadDrawerPage(1, false)\r\n  }\r\n}\r\n\r\nconst closeListDrawer = () => {\r\n  drawerRef.value?.close()\r\n}\r\n\r\nconst onDrawerChange = (e) => {\r\n  drawerState.visible = !!e.show\r\n}\r\n\r\nconst loadDrawerPage = async (page = 1, append = false) => {\r\n  if (!state.selectedBook) return\r\n  if (drawerState.loading) return\r\n  drawerState.loading = true\r\n  try {\r\n    const res = await request.get(\r\n      `${API_ENDPOINTS.WORD.BOOK_WORDS}/${state.selectedBook.id}/words`,\r\n      { page, limit: drawerState.limit },\r\n      { showLoading: false }\r\n    )\r\n    const list = (res?.list || res?.words || res || []).map(normalizeWord)\r\n    if (append) {\r\n      drawerState.list = drawerState.list.concat(list)\r\n    } else {\r\n      drawerState.list = list\r\n    }\r\n    drawerState.page = page\r\n    drawerState.total = res?.total || drawerState.list.length\r\n    drawerState.finished = drawerState.list.length >= drawerState.total\r\n  } catch (error) {\r\n    console.error('抽屉列表加载失败', error)\r\n    uni.showToast({ title: '列表加载失败', icon: 'none' })\r\n  } finally {\r\n    drawerState.loading = false\r\n  }\r\n}\r\n\r\nconst loadMoreDrawer = async () => {\r\n  if (drawerState.finished || drawerState.loading) return\r\n  await loadDrawerPage(drawerState.page + 1, true)\r\n}\r\n\r\nconst normalizeWord = (item) => ({\r\n  ...item,\r\n  is_favorite: !!item.is_favorite,\r\n  wrong_count: Number(item.wrong_count || 0),\r\n  status: item.status || 'pending'\r\n})\r\n\r\nconst fetchPracticeWords = async (page = 1, append = false) => {\r\n  if (!state.selectedBook) return\r\n  if (state.paging.loading) return\r\n  state.paging.loading = true\r\n  try {\r\n    const res = await request.get(\r\n      `${API_ENDPOINTS.WORD.BOOK_WORDS}/${state.selectedBook.id}/words`,\r\n      { page, limit: state.paging.limit },\r\n      { showLoading: false }\r\n    )\r\n    const list = (res?.list || res?.words || res || []).map(normalizeWord)\r\n    if (append) {\r\n      state.words = state.words.concat(list)\r\n    } else {\r\n      state.words = list\r\n    }\r\n    state.paging.page = page\r\n    state.paging.total = res?.total || state.summary.total || state.words.length\r\n    state.paging.finished = state.words.length >= state.paging.total\r\n  } catch (error) {\r\n    console.error('获取单词失败', error)\r\n    uni.showToast({ title: '单词加载失败', icon: 'none' })\r\n  } finally {\r\n    state.paging.loading = false\r\n  }\r\n}\r\n\r\nconst loadBookData = async () => {\r\n  if (!state.selectedBook) return\r\n  // 重置分页\r\n  state.paging.page = 1\r\n  state.paging.total = 0\r\n  state.paging.finished = false\r\n  state.words = []\r\n  drawerState.list = []\r\n  drawerState.page = 1\r\n  drawerState.total = 0\r\n  drawerState.finished = false\r\n  try {\r\n    const bookId = state.selectedBook.id\r\n    const [summaryRes, stateRes] = await Promise.all([\r\n      request.get(`${API_ENDPOINTS.WORD.PROGRESS}/${bookId}/progress`, {}, { showLoading: false }),\r\n      request.get(`${API_ENDPOINTS.WORD.STATE}/${bookId}/state`, {}, { showLoading: false })\r\n    ])\r\n\r\n    state.summary = {\r\n      total: summaryRes?.total || 0,\r\n      mastered: summaryRes?.mastered || 0,\r\n      review: summaryRes?.review || 0,\r\n      favorites: summaryRes?.favorites || 0,\r\n      wrongs: summaryRes?.wrongs || 0,\r\n      last_word_entry_id: summaryRes?.last_word_entry_id || null,\r\n      last_word_order_index: summaryRes?.last_word_order_index || null\r\n    }\r\n\r\n    // 根据上次位置确定初始页\r\n    const initialPage =\r\n      state.summary.last_word_order_index && state.paging.limit\r\n        ? Math.ceil(state.summary.last_word_order_index / state.paging.limit)\r\n        : 1\r\n    await fetchPracticeWords(initialPage, false)\r\n\r\n    if (stateRes?.last_word_entry_id) {\r\n      const idx = state.words.findIndex((w) => w.id === stateRes.last_word_entry_id)\r\n      currentIndex.value = idx >= 0 ? idx : 0\r\n    } else {\r\n      currentIndex.value = 0\r\n    }\r\n  } catch (error) {\r\n    console.error('加载词书数据失败', error)\r\n    uni.showToast({ title: '加载词书失败', icon: 'none' })\r\n  }\r\n}\r\n\r\nconst changePracticeFilter = (mode) => {\r\n  state.practiceFilter = mode\r\n  currentIndex.value = 0\r\n}\r\n\r\nconst jumpRandom = () => {\r\n  if (!practiceList.value.length) return\r\n  const randomIndex = Math.floor(Math.random() * practiceList.value.length)\r\n  currentIndex.value = randomIndex\r\n  savePracticeState()\r\n}\r\n\r\nconst jumpToWord = (wordId) => {\r\n  const idx = practiceList.value.findIndex((w) => w.id === wordId)\r\n  if (idx !== -1) {\r\n    currentIndex.value = idx\r\n    savePracticeState()\r\n    uni.showToast({ title: '已切换到该单词', icon: 'none' })\r\n    closeListDrawer()\r\n  }\r\n}\r\n\r\nconst updateProgressLocal = (wordId, updater) => {\r\n  const target = state.words.find((w) => w.id === wordId)\r\n  if (target) {\r\n    updater(target)\r\n  }\r\n}\r\n\r\nconst updateWordProgress = async (word, payload) => {\r\n  if (!state.selectedBook) return\r\n  await request.post(\r\n    `${API_ENDPOINTS.WORD.PROGRESS}/${state.selectedBook.id}/progress`,\r\n    { word_entry_id: word.id, ...payload },\r\n    { showLoading: false }\r\n  )\r\n}\r\n\r\nconst markWord = async (status) => {\r\n  if (!currentWord.value) return\r\n  try {\r\n    await updateWordProgress(currentWord.value, { status })\r\n    updateProgressLocal(currentWord.value.id, (item) => {\r\n      item.status = status\r\n    })\r\n    refreshSummaryCounters()\r\n    switchWord('next')\r\n  } catch (error) {\r\n    console.error('更新状态失败', error)\r\n    uni.showToast({ title: '更新状态失败', icon: 'none' })\r\n  }\r\n}\r\n\r\nconst markWrong = async () => {\r\n  if (!currentWord.value) return\r\n  try {\r\n    await updateWordProgress(currentWord.value, { wrong_delta: 1, status: 'review' })\r\n    updateProgressLocal(currentWord.value.id, (item) => {\r\n      item.wrong_count = Number(item.wrong_count || 0) + 1\r\n      item.status = 'review'\r\n    })\r\n    refreshSummaryCounters()\r\n    uni.showToast({ title: '已加入错题本', icon: 'none' })\r\n  } catch (error) {\r\n    console.error('标记错题失败', error)\r\n    uni.showToast({ title: '标记失败', icon: 'none' })\r\n  }\r\n}\r\n\r\nconst toggleFavorite = async (word) => {\r\n  try {\r\n    const next = !word.is_favorite\r\n    await updateWordProgress(word, { is_favorite: next })\r\n    updateProgressLocal(word.id, (item) => {\r\n      item.is_favorite = next\r\n    })\r\n    refreshSummaryCounters()\r\n    uni.showToast({ title: next ? '已收藏' : '已取消收藏', icon: 'none' })\r\n  } catch (error) {\r\n    console.error('收藏失败', error)\r\n    uni.showToast({ title: '收藏失败', icon: 'none' })\r\n  }\r\n}\r\n\r\nconst refreshSummaryCounters = () => {\r\n  state.summary.mastered = state.words.filter((w) => w.status === 'mastered').length\r\n  state.summary.review = state.words.filter((w) => w.status === 'review').length\r\n  state.summary.favorites = state.words.filter((w) => w.is_favorite).length\r\n  state.summary.wrongs = state.words.filter((w) => w.wrong_count > 0).length\r\n}\r\n\r\nconst switchWord = async (direction) => {\r\n  if (!practiceList.value.length) return\r\n  if (direction === 'next') {\r\n    if (currentIndex.value + 1 >= practiceList.value.length && !state.paging.finished) {\r\n      await fetchPracticeWords(state.paging.page + 1, true)\r\n    }\r\n    currentIndex.value = Math.min(currentIndex.value + 1, practiceList.value.length - 1)\r\n  } else {\r\n    currentIndex.value =\r\n      (currentIndex.value - 1 + practiceList.value.length) % practiceList.value.length\r\n  }\r\n  savePracticeState()\r\n}\r\n\r\nconst savePracticeState = async () => {\r\n  if (!state.selectedBook) return\r\n  const word = currentWord.value\r\n  try {\r\n    await request.post(\r\n      `${API_ENDPOINTS.WORD.STATE}/${state.selectedBook.id}/state`,\r\n      {\r\n        last_word_entry_id: word?.id || null,\r\n        last_word_order_index: word?.order_index || null\r\n      },\r\n      { showLoading: false }\r\n    )\r\n  } catch (error) {\r\n    console.warn('保存学习位置失败', error)\r\n  }\r\n}\r\n\r\nconst setupAudioContext = () => {\r\n  if (audioContext || !uni.createInnerAudioContext) return\r\n  audioContext = uni.createInnerAudioContext()\r\n  audioContext.obeyMuteSwitch = false\r\n  audioContext.onError((err) => {\r\n    pronunciationState.error = '发音播放失败，请稍后重试'\r\n    console.error('音频错误', err)\r\n  })\r\n}\r\n\r\nconst playPronunciation = async () => {\r\n  if (!currentWord.value) return\r\n  pronunciationState.error = ''\r\n  pronunciationState.loading = true\r\n  setupAudioContext()\r\n  if (!audioContext) {\r\n    pronunciationState.error = '当前环境不支持音频播放'\r\n    pronunciationState.loading = false\r\n    return\r\n  }\r\n  const text = encodeURIComponent(currentWord.value.word)\r\n  const audioUrls = [\r\n    `https://tts.baidu.com/text2audio?lan=en&ie=UTF-8&text=${text}`,\r\n    `https://dict.youdao.com/dictvoice?type=2&audio=${text}`,\r\n    `https://tts.iciba.com/tts.php?text=${text}`\r\n  ]\r\n\r\n  const tryPlay = (index) => {\r\n    if (index >= audioUrls.length) {\r\n      pronunciationState.error = '发音接口异常，请稍后重试'\r\n      pronunciationState.loading = false\r\n      return\r\n    }\r\n    audioContext.src = audioUrls[index]\r\n    audioContext.play()\r\n    audioContext.onError(() => {\r\n      tryPlay(index + 1)\r\n    })\r\n    audioContext.onStop(() => {\r\n      pronunciationState.loading = false\r\n    })\r\n  }\r\n\r\n  tryPlay(0)\r\n}\r\n\r\nonMounted(() => {\r\n  fetchBooks()\r\n  setupAudioContext()\r\n})\r\n\r\nonUnmounted(() => {\r\n  if (audioContext) {\r\n    audioContext.stop()\r\n    audioContext.destroy()\r\n    audioContext = null\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.word-hub {\r\n  min-height: 100vh;\r\n  background: linear-gradient(180deg, #f6f8ff 0%, #f9fafb 100%);\r\n  padding: 12rpx 20rpx 80rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.hero-card {\r\n  background: linear-gradient(135deg, #0f62fe, #6b8bff);\r\n  border-radius: 20rpx;\r\n  padding: 26rpx 22rpx 30rpx;\r\n  color: #fff;\r\n  box-shadow: 0 16rpx 40rpx rgba(15, 98, 254, 0.35);\r\n  margin: 8rpx 0 16rpx;\r\n}\r\n\r\n.hero-head {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  gap: 16rpx;\r\n}\r\n\r\n.hero-badge {\r\n  font-size: 24rpx;\r\n  letter-spacing: 4rpx;\r\n  text-transform: uppercase;\r\n  opacity: 0.75;\r\n}\r\n\r\n.hero-title {\r\n  display: block;\r\n  margin-top: 12rpx;\r\n  font-size: 48rpx;\r\n  font-weight: 700;\r\n}\r\n\r\n.hero-desc {\r\n  display: block;\r\n  margin-top: 10rpx;\r\n  font-size: 26rpx;\r\n  opacity: 0.9;\r\n  opacity: 0.9;\r\n}\r\n\r\n.hero-actions {\r\n  display: flex;\r\n  gap: 12rpx;\r\n}\r\n\r\n.hero-chip {\r\n  background: #fff;\r\n  color: #0f62fe;\r\n  border-radius: 999rpx;\r\n  padding: 12rpx 20rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n  font-size: 26rpx;\r\n  box-shadow: 0 8rpx 18rpx rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.hero-chip.ghost {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  color: #fff;\r\n  box-shadow: none;\r\n}\r\n\r\n.hero-stats {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 1fr);\r\n  gap: 12rpx;\r\n  margin-top: 20rpx;\r\n}\r\n\r\n.stat {\r\n  background: rgba(255, 255, 255, 0.16);\r\n  border-radius: 16rpx;\r\n  padding: 16rpx;\r\n  text-align: center;\r\n}\r\n\r\n.stat-value {\r\n  font-size: 34rpx;\r\n  font-weight: 700;\r\n}\r\n\r\n.stat-label {\r\n  display: block;\r\n  margin-top: 6rpx;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.progress-line {\r\n  margin-top: 20rpx;\r\n}\r\n\r\n.progress-text {\r\n  display: block;\r\n  margin-top: 8rpx;\r\n  font-size: 24rpx;\r\n  opacity: 0.85;\r\n}\r\n\r\n.section-card {\r\n  background: #fff;\r\n  border-radius: 18rpx;\r\n  padding: 20rpx;\r\n  margin: 10rpx 0 14rpx;\r\n  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.section-head {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n}\r\n\r\n.section-title {\r\n  font-size: 32rpx;\r\n  font-weight: 700;\r\n  color: #111;\r\n}\r\n\r\n.section-tip {\r\n  font-size: 24rpx;\r\n  color: #8c8c8c;\r\n}\r\n\r\n.book-scroll {\r\n  margin-top: 16rpx;\r\n  white-space: nowrap;\r\n}\r\n\r\n.book-card {\r\n  display: inline-flex;\r\n  flex-direction: column;\r\n  gap: 6rpx;\r\n  background: #f6f8ff;\r\n  border-radius: 14rpx;\r\n  padding: 18rpx 20rpx;\r\n  margin-right: 12rpx;\r\n  min-width: 220rpx;\r\n  box-shadow: 0 6rpx 16rpx rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.book-card.active {\r\n  background: linear-gradient(135deg, #0f62fe, #5b8dff);\r\n  color: #fff;\r\n}\r\n\r\n.book-name {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.book-meta {\r\n  font-size: 24rpx;\r\n  opacity: 0.8;\r\n}\r\n\r\n.pill-group {\r\n  display: flex;\r\n  gap: 12rpx;\r\n}\r\n\r\n.pill {\r\n  padding: 12rpx 18rpx;\r\n  border-radius: 999rpx;\r\n  background: #f1f4ff;\r\n  color: #0f62fe;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.pill.active {\r\n  background: #0f62fe;\r\n  color: #fff;\r\n}\r\n\r\n.mode-actions {\r\n  margin-top: 16rpx;\r\n  display: flex;\r\n  gap: 12rpx;\r\n}\r\n\r\n.mode-btn {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 10rpx;\r\n  border-radius: 14rpx;\r\n  padding: 18rpx 0;\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.mode-btn.primary {\r\n  background: linear-gradient(135deg, #0f62fe, #00b4d8);\r\n  color: #fff;\r\n}\r\n\r\n.mode-btn.ghost {\r\n  border: 2rpx solid #d6e4ff;\r\n  color: #0f62fe;\r\n}\r\n\r\n.word-card {\r\n  background: #fff;\r\n  border-radius: 18rpx;\r\n}\r\n\r\n.word-head {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.word-text {\r\n  font-size: 46rpx;\r\n  font-weight: 700;\r\n  color: #111;\r\n}\r\n\r\n.word-phonetic {\r\n  display: block;\r\n  font-size: 26rpx;\r\n  color: #4b5563;\r\n}\r\n\r\n.word-translation {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  color: #4b5563;\r\n  margin-top: 6rpx;\r\n}\r\n\r\n.word-tag {\r\n  min-width: 100rpx;\r\n  text-align: center;\r\n  background: #eef2ff;\r\n  color: #4c51bf;\r\n  border-radius: 16rpx;\r\n  padding: 12rpx 0;\r\n  font-weight: 600;\r\n}\r\n\r\n.word-actions {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12rpx;\r\n  margin: 18rpx 0;\r\n}\r\n\r\n.action-chip {\r\n  flex: 1;\r\n  min-width: 200rpx;\r\n  background: linear-gradient(135deg, #0f62fe, #5b8dff);\r\n  color: #fff;\r\n  border-radius: 12rpx;\r\n  padding: 16rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8rpx;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.action-chip.warn {\r\n  background: linear-gradient(135deg, #ffb347, #ff9f7b);\r\n}\r\n\r\n.action-chip.danger {\r\n  background: linear-gradient(135deg, #ff6b6b, #f94d63);\r\n}\r\n\r\n.meta-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  margin-top: 8rpx;\r\n}\r\n\r\n.error-text {\r\n  color: #ff4d4f;\r\n}\r\n\r\n.navigation {\r\n  display: flex;\r\n  gap: 12rpx;\r\n  margin-top: 16rpx;\r\n}\r\n\r\n.nav-btn {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 20rpx 0;\r\n  border-radius: 14rpx;\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.nav-btn.primary {\r\n  background: linear-gradient(135deg, #0f62fe, #00b4d8);\r\n  color: #fff;\r\n}\r\n\r\n.nav-btn.ghost {\r\n  border: 2rpx solid #d6e4ff;\r\n  color: #0f62fe;\r\n}\r\n\r\n.list-card {\r\n  padding: 0 0 12rpx 0;\r\n}\r\n\r\n.list-icon {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  border-radius: 12rpx;\r\n  background: #0f62fe;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-left: 16rpx;\r\n}\r\n\r\n.list-icon.fav {\r\n  background: #ffb347;\r\n}\r\n\r\n.chip-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12rpx;\r\n  margin-top: 12rpx;\r\n}\r\n\r\n.chip {\r\n  flex: 1 1 calc(50% - 12rpx);\r\n  min-width: 300rpx;\r\n  background: #f8f9fa;\r\n  border-radius: 14rpx;\r\n  padding: 14rpx;\r\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.chip.danger {\r\n  background: #fff5f5;\r\n}\r\n\r\n.chip-title {\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  color: #111;\r\n}\r\n\r\n.chip-desc {\r\n  display: block;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n\r\n.empty-block {\r\n  min-height: 140rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 10rpx;\r\n  color: #8c8c8c;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.drawer-panel {\r\n  background: #fff;\r\n  border-top-left-radius: 20rpx;\r\n  border-top-right-radius: 20rpx;\r\n  padding: 20rpx;\r\n  height: 70vh;\r\n  box-shadow: 0 -8rpx 30rpx rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.drawer-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.drawer-title {\r\n  font-size: 30rpx;\r\n  font-weight: 700;\r\n  color: #111;\r\n}\r\n\r\n.drawer-close {\r\n  width: 64rpx;\r\n  height: 64rpx;\r\n  border-radius: 50%;\r\n  background: #f3f4f6;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.drawer-subtitle {\r\n  font-size: 24rpx;\r\n  color: #6b7280;\r\n  margin-top: 6rpx;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.drawer-scroll {\r\n  height: calc(70vh - 120rpx);\r\n}\r\n\r\n.drawer-footer {\r\n  text-align: center;\r\n  padding: 12rpx 0 6rpx;\r\n  color: #8c8c8c;\r\n  font-size: 24rpx;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/开源项目/wx/uni-ui/pages/word-practice/word-practice.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","computed","uni","request","API_ENDPOINTS","onMounted","onUnmounted"],"mappings":"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"}