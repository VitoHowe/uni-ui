{"version":3,"file":"word-practice.js","sources":["pages/word-practice/word-practice.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd29yZC1wcmFjdGljZS93b3JkLXByYWN0aWNlLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"word-hub\">\n    <view class=\"hero-card\">\n      <view class=\"hero-top\">\n        <view>\n          <text class=\"hero-badge\">Vocabulary Hub</text>\n          <text class=\"hero-title\">智能记忆控制台</text>\n          <text class=\"hero-desc\">集中管理词书、收藏与错词，保持高效复习节奏。</text>\n        </view>\n        <button class=\"hero-switch\" @click=\"openSelector\">切换默认词书</button>\n      </view>\n      <view class=\"hero-stats\">\n        <view class=\"hero-stat\" v-for=\"stat in heroStats\" :key=\"stat.label\">\n          <text class=\"stat-value\">{{ stat.value }}</text>\n          <text class=\"stat-label\">{{ stat.label }}</text>\n        </view>\n      </view>\n    </view>\n\n    <view class=\"section\">\n      <view class=\"section-head\">\n        <view>\n          <text class=\"section-title\">单词本</text>\n          <text class=\"section-sub\">共 {{ store.books.length }} 本 · 选择任意一本进入练习</text>\n        </view>\n      </view>\n      <view v-if=\"store.booksLoading\" class=\"section-loading\">加载中...</view>\n      <view v-else-if=\"!store.books.length\" class=\"section-empty\">\n        <uni-icons type=\"info\" size=\"32\" color=\"#94a3b8\" />\n        <text>暂无单词书，请先上传或从后台同步。</text>\n      </view>\n      <view v-else class=\"book-grid\">\n        <view class=\"book-card\" v-for=\"book in store.books\" :key=\"book.id\">\n          <view class=\"book-card__header\">\n            <text class=\"book-name\">{{ book.name }}</text>\n            <text class=\"book-meta\">{{ formatWords(book.totalWords) }} 词</text>\n          </view>\n          <text class=\"book-desc\">{{ book.description || '暂无简介，立即开启学习。' }}</text>\n          <view class=\"book-tags\">\n            <text class=\"tag\">{{ book.language || 'unk' }}</text>\n            <text class=\"tag ghost\">创建于 {{ formatDate(book.createdAt) }}</text>\n          </view>\n          <view class=\"book-actions\">\n            <button class=\"ghost-btn\" @click=\"previewBook(book)\">设为当前</button>\n            <button class=\"primary-btn\" @click=\"goPractice(book.id)\">进入练习</button>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <view class=\"section glass\">\n      <view class=\"section-head\">\n        <view>\n          <text class=\"section-title\">收藏夹</text>\n          <text class=\"section-sub\">当前词书 · {{ currentBookName }}</text>\n        </view>\n        <text class=\"section-pill\">{{ favoriteCount }} 词</text>\n      </view>\n      <view class=\"highlight\">\n        <text class=\"highlight-count\">{{ favoriteCount }}</text>\n        <text class=\"highlight-note\">\n          {{ favoriteCount ? '已收藏词条，进入练习可查看详情' : '还没有收藏，进入词书即可收藏' }}\n        </text>\n      </view>\n      <button class=\"section-btn\" @click=\"goPractice(store.selectedBookId)\">前往练习</button>\n    </view>\n\n    <view class=\"section glass\">\n      <view class=\"section-head\">\n        <view>\n          <text class=\"section-title\">错词复习</text>\n          <text class=\"section-sub\">自动记录需要复盘的词汇</text>\n        </view>\n        <text class=\"section-pill warm\">{{ mistakeCount }} 词</text>\n      </view>\n      <view class=\"highlight warm\">\n        <text class=\"highlight-count\">{{ mistakeCount }}</text>\n        <text class=\"highlight-note\">\n          {{ mistakeCount ? '存在待复习词汇，进入词书即可开始复盘' : '暂时没有错词，保持学习节奏' }}\n        </text>\n      </view>\n      <button class=\"section-btn warm\" @click=\"goPractice(store.selectedBookId)\">开始复习</button>\n    </view>\n\n    <WordBookSelector\n      :visible=\"selectorVisible\"\n      :books=\"store.books\"\n      :selected-book-id=\"store.selectedBookId\"\n      :loading=\"store.booksLoading\"\n      @close=\"selectorVisible = false\"\n      @select=\"handleSelectBook\"\n    />\n  </view>\n</template>\n\n<script setup>\nimport { computed, ref, onMounted } from 'vue'\nimport { useWordPracticeStore } from '@/stores/wordPractice.js'\nimport WordBookSelector from '@/components/word-practice/WordBookSelector.vue'\n\nconst store = useWordPracticeStore()\nconst selectorVisible = ref(false)\n\nconst progressSnapshot = computed(() => store.currentProgress)\n\nconst heroStats = computed(() => [\n  { label: '词书', value: store.books.length },\n  { label: '收藏', value: progressSnapshot.value.favorites.length },\n  { label: '错词', value: progressSnapshot.value.mistakes.length }\n])\n\nconst currentBookName = computed(() => store.currentBook?.name || '未选择')\nconst favoriteCount = computed(() => progressSnapshot.value.favorites.length)\nconst mistakeCount = computed(() => progressSnapshot.value.mistakes.length)\n\nconst ensureInitialData = async () => {\n  if (!store.books.length) {\n    await store.loadBooks()\n  }\n  if (!store.selectedBookId && store.books.length) {\n    await store.selectBook(store.books[0].id, { preloadWords: false })\n  }\n}\n\nonMounted(() => {\n  ensureInitialData()\n})\n\nconst openSelector = () => {\n  selectorVisible.value = true\n}\n\nconst handleSelectBook = async (book) => {\n  if (!book) return\n  await store.selectBook(book.id, { preloadWords: false })\n  selectorVisible.value = false\n}\n\nconst previewBook = async (book) => {\n  await store.selectBook(book.id, { preloadWords: false })\n  selectorVisible.value = false\n  uni.showToast({ title: `已切换至 ${book.name}`, icon: 'none' })\n}\n\nconst goPractice = (bookId) => {\n  const target = bookId || store.selectedBookId\n  if (!target) {\n    uni.showToast({ title: '请先选择词书', icon: 'none' })\n    return\n  }\n  uni.navigateTo({ url: `/pages/word-practice/word-detail?bookId=${target}` })\n}\n\nconst formatWords = (count = 0) => count.toLocaleString()\nconst formatDate = (value) => {\n  if (!value) return '刚刚'\n  return new Date(value).toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' })\n}\n</script>\n\n<style scoped lang=\"scss\">\n.word-hub {\n  min-height: 100vh;\n  padding: 30rpx 24rpx 80rpx;\n  background: linear-gradient(180deg, #f9fbff 0%, #f1f4ff 40%, #fdf9ff 100%);\n}\n\n.hero-card {\n  border-radius: 36rpx;\n  padding: 42rpx 32rpx;\n  background: radial-gradient(circle at top right, rgba(149, 114, 252, 0.6), rgba(79, 70, 229, 0.95));\n  color: #fff;\n  box-shadow: 0 30rpx 60rpx rgba(79, 70, 229, 0.35);\n  margin-bottom: 32rpx;\n}\n\n.hero-top {\n  display: flex;\n  justify-content: space-between;\n  gap: 20rpx;\n}\n\n.hero-badge {\n  font-size: 24rpx;\n  letter-spacing: 4rpx;\n  text-transform: uppercase;\n  opacity: 0.75;\n}\n\n.hero-title {\n  display: block;\n  margin-top: 12rpx;\n  font-size: 48rpx;\n  font-weight: 700;\n}\n\n.hero-desc {\n  display: block;\n  margin-top: 10rpx;\n  font-size: 26rpx;\n  opacity: 0.9;\n}\n\n.hero-switch {\n  height: fit-content;\n  border: none;\n  border-radius: 999rpx;\n  padding: 14rpx 24rpx;\n  font-size: 26rpx;\n  color: #1d4ed8;\n  background: #fff;\n}\n\n.hero-stats {\n  display: flex;\n  gap: 16rpx;\n  margin-top: 28rpx;\n}\n\n.hero-stat {\n  flex: 1;\n  padding: 20rpx;\n  border-radius: 20rpx;\n  background: rgba(255, 255, 255, 0.22);\n  text-align: center;\n}\n\n.stat-value {\n  font-size: 36rpx;\n  font-weight: 600;\n}\n\n.stat-label {\n  display: block;\n  margin-top: 6rpx;\n  font-size: 24rpx;\n}\n\n.section {\n  margin-bottom: 30rpx;\n  padding: 26rpx 24rpx;\n  border-radius: 28rpx;\n  background: #fff;\n  box-shadow: 0 20rpx 40rpx rgba(15, 23, 42, 0.08);\n}\n\n.section.glass {\n  background: rgba(255, 255, 255, 0.8);\n  backdrop-filter: blur(20rpx);\n}\n\n.section-head {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16rpx;\n}\n\n.section-title {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #0f172a;\n}\n\n.section-sub {\n  display: block;\n  margin-top: 6rpx;\n  font-size: 24rpx;\n  color: #6b7280;\n}\n\n.section-pill {\n  padding: 10rpx 22rpx;\n  border-radius: 999rpx;\n  background: #eef2ff;\n  color: #4338ca;\n  font-size: 24rpx;\n}\n\n.section-pill.warm {\n  background: #fff5f5;\n  color: #b91c1c;\n}\n\n.section-loading,\n.section-empty {\n  min-height: 140rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 12rpx;\n  color: #9ca3af;\n}\n\n.book-grid {\n  display: flex;\n  flex-direction: column;\n  gap: 18rpx;\n}\n\n.book-card {\n  border-radius: 24rpx;\n  padding: 24rpx;\n  background: linear-gradient(135deg, #ffffff, #f4f6ff);\n  border: 1px solid #eef2ff;\n}\n\n.book-card__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n}\n\n.book-name {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #111827;\n}\n\n.book-meta {\n  font-size: 24rpx;\n  color: #6b7280;\n}\n\n.book-desc {\n  display: block;\n  margin-top: 10rpx;\n  font-size: 26rpx;\n  color: #4b5563;\n}\n\n.book-tags {\n  display: flex;\n  gap: 12rpx;\n  margin-top: 14rpx;\n}\n\n.tag {\n  padding: 8rpx 18rpx;\n  border-radius: 999rpx;\n  background: #e0e7ff;\n  color: #4338ca;\n  font-size: 24rpx;\n}\n\n.tag.ghost {\n  background: #f1f5f9;\n  color: #475569;\n}\n\n.book-actions {\n  display: flex;\n  gap: 16rpx;\n  margin-top: 20rpx;\n}\n\n.ghost-btn,\n.primary-btn,\n.section-btn {\n  flex: 1;\n  border-radius: 16rpx;\n  padding: 18rpx 0;\n  font-size: 28rpx;\n  border: none;\n}\n\n.ghost-btn {\n  background: #eef2ff;\n  color: #1d4ed8;\n}\n\n.primary-btn,\n.section-btn {\n  background: linear-gradient(135deg, #4f46e5, #7c3aed);\n  color: #fff;\n}\n\n.section-btn.warm {\n  background: linear-gradient(135deg, #f97316, #fb7185);\n}\n\n.highlight {\n  border-radius: 22rpx;\n  padding: 20rpx;\n  background: #f7f8ff;\n  margin-bottom: 18rpx;\n}\n\n.highlight.warm {\n  background: #fff4f4;\n}\n\n.highlight-count {\n  font-size: 40rpx;\n  font-weight: 700;\n  color: #111827;\n}\n\n.highlight-note {\n  display: block;\n  margin-top: 8rpx;\n  font-size: 24rpx;\n  color: #6b7280;\n}\n</style>\r\n","import MiniProgramPage from 'E:/personal/wx/uni-ui/pages/word-practice/word-practice.vue'\nwx.createPage(MiniProgramPage)"],"names":["useWordPracticeStore","ref","computed","onMounted","uni"],"mappings":";;;;;;;;;;;AAkGA,MAAM,mBAAmB,MAAW;;;;AAEpC,UAAM,QAAQA,oBAAAA,qBAAsB;AACpC,UAAM,kBAAkBC,cAAG,IAAC,KAAK;AAEjC,UAAM,mBAAmBC,cAAQ,SAAC,MAAM,MAAM,eAAe;AAE7D,UAAM,YAAYA,cAAQ,SAAC,MAAM;AAAA,MAC/B,EAAE,OAAO,MAAM,OAAO,MAAM,MAAM,OAAQ;AAAA,MAC1C,EAAE,OAAO,MAAM,OAAO,iBAAiB,MAAM,UAAU,OAAQ;AAAA,MAC/D,EAAE,OAAO,MAAM,OAAO,iBAAiB,MAAM,SAAS,OAAQ;AAAA,IAChE,CAAC;AAED,UAAM,kBAAkBA,cAAQ,SAAC,MAAM;;AAAA,0BAAM,gBAAN,mBAAmB,SAAQ;AAAA,KAAK;AACvE,UAAM,gBAAgBA,cAAQ,SAAC,MAAM,iBAAiB,MAAM,UAAU,MAAM;AAC5E,UAAM,eAAeA,cAAQ,SAAC,MAAM,iBAAiB,MAAM,SAAS,MAAM;AAE1E,UAAM,oBAAoB,YAAY;AACpC,UAAI,CAAC,MAAM,MAAM,QAAQ;AACvB,cAAM,MAAM,UAAW;AAAA,MACxB;AACD,UAAI,CAAC,MAAM,kBAAkB,MAAM,MAAM,QAAQ;AAC/C,cAAM,MAAM,WAAW,MAAM,MAAM,CAAC,EAAE,IAAI,EAAE,cAAc,OAAO;AAAA,MAClE;AAAA,IACH;AAEAC,kBAAAA,UAAU,MAAM;AACd,wBAAmB;AAAA,IACrB,CAAC;AAED,UAAM,eAAe,MAAM;AACzB,sBAAgB,QAAQ;AAAA,IAC1B;AAEA,UAAM,mBAAmB,OAAO,SAAS;AACvC,UAAI,CAAC;AAAM;AACX,YAAM,MAAM,WAAW,KAAK,IAAI,EAAE,cAAc,OAAO;AACvD,sBAAgB,QAAQ;AAAA,IAC1B;AAEA,UAAM,cAAc,OAAO,SAAS;AAClC,YAAM,MAAM,WAAW,KAAK,IAAI,EAAE,cAAc,OAAO;AACvD,sBAAgB,QAAQ;AACxBC,oBAAAA,MAAI,UAAU,EAAE,OAAO,QAAQ,KAAK,IAAI,IAAI,MAAM,QAAQ;AAAA,IAC5D;AAEA,UAAM,aAAa,CAAC,WAAW;AAC7B,YAAM,SAAS,UAAU,MAAM;AAC/B,UAAI,CAAC,QAAQ;AACXA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAC/C;AAAA,MACD;AACDA,oBAAG,MAAC,WAAW,EAAE,KAAK,2CAA2C,MAAM,IAAI;AAAA,IAC7E;AAEA,UAAM,cAAc,CAAC,QAAQ,MAAM,MAAM,eAAgB;AACzD,UAAM,aAAa,CAAC,UAAU;AAC5B,UAAI,CAAC;AAAO,eAAO;AACnB,aAAO,IAAI,KAAK,KAAK,EAAE,mBAAmB,SAAS,EAAE,OAAO,SAAS,KAAK,WAAW;AAAA,IACvF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5JA,GAAG,WAAW,eAAe;"}