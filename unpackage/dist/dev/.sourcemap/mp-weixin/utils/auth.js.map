{"version":3,"file":"auth.js","sources":["utils/auth.js"],"sourcesContent":["import { STORAGE_KEYS, API_CONFIG } from './constants.js'\r\n\r\n/**\r\n * Tokenç®¡ç†å·¥å…·ç±»\r\n */\r\nexport class TokenManager {\r\n  /**\r\n   * è®¾ç½®Tokenä¿¡æ¯\r\n   * @param {Object} tokenData - Tokenæ•°æ® \r\n   * @param {string} tokenData.accessToken - è®¿é—®ä»¤ç‰Œ\r\n   * @param {string} tokenData.refreshToken - åˆ·æ–°ä»¤ç‰Œ\r\n   * @param {string} tokenData.expiresIn - è¿‡æœŸæ—¶é—´ï¼ˆå¦‚\"2h\"ï¼‰\r\n   */\r\n  static setTokens(tokenData) {\r\n    const { accessToken, refreshToken, expiresIn } = tokenData\r\n    \r\n    // è®¡ç®—è¿‡æœŸæ—¶é—´æˆ³\r\n    const expiresAt = Date.now() + this.parseExpiresIn(expiresIn)\r\n    \r\n    // å­˜å‚¨åˆ°å†…å­˜ï¼ˆPinia storeä¼šå¤„ç†ï¼‰\r\n    uni.setStorageSync(STORAGE_KEYS.ACCESS_TOKEN, accessToken)\r\n    uni.setStorageSync(STORAGE_KEYS.REFRESH_TOKEN, refreshToken)\r\n    uni.setStorageSync(STORAGE_KEYS.TOKEN_EXPIRES_AT, expiresAt)\r\n    \r\n    console.log('ğŸ”‘ Tokenå·²æ›´æ–°', { expiresAt: new Date(expiresAt) })\r\n  }\r\n  \r\n  /**\r\n   * è·å–è®¿é—®ä»¤ç‰Œ\r\n   * @returns {string|null} è®¿é—®ä»¤ç‰Œ\r\n   */\r\n  static getAccessToken() {\r\n    return uni.getStorageSync(STORAGE_KEYS.ACCESS_TOKEN) || null\r\n  }\r\n  \r\n  /**\r\n   * è·å–åˆ·æ–°ä»¤ç‰Œ\r\n   * @returns {string|null} åˆ·æ–°ä»¤ç‰Œ\r\n   */\r\n  static getRefreshToken() {\r\n    return uni.getStorageSync(STORAGE_KEYS.REFRESH_TOKEN) || null\r\n  }\r\n  \r\n  /**\r\n   * æ£€æŸ¥Tokenæ˜¯å¦å³å°†è¿‡æœŸ\r\n   * @returns {boolean} æ˜¯å¦éœ€è¦åˆ·æ–°\r\n   */\r\n  static shouldRefreshToken() {\r\n    const expiresAt = uni.getStorageSync(STORAGE_KEYS.TOKEN_EXPIRES_AT)\r\n    if (!expiresAt) return false\r\n    \r\n    const now = Date.now()\r\n    const timeLeft = expiresAt - now\r\n    \r\n    // æå‰5åˆ†é’Ÿåˆ·æ–°\r\n    return timeLeft <= API_CONFIG.TOKEN_REFRESH_THRESHOLD\r\n  }\r\n  \r\n  /**\r\n   * æ£€æŸ¥Tokenæ˜¯å¦å·²è¿‡æœŸ\r\n   * @returns {boolean} æ˜¯å¦å·²è¿‡æœŸ\r\n   */\r\n  static isTokenExpired() {\r\n    const expiresAt = uni.getStorageSync(STORAGE_KEYS.TOKEN_EXPIRES_AT)\r\n    if (!expiresAt) return true\r\n    \r\n    return Date.now() >= expiresAt\r\n  }\r\n  \r\n  /**\r\n   * æ¸…é™¤æ‰€æœ‰Token\r\n   */\r\n  static clearTokens() {\r\n    uni.removeStorageSync(STORAGE_KEYS.ACCESS_TOKEN)\r\n    uni.removeStorageSync(STORAGE_KEYS.REFRESH_TOKEN)\r\n    uni.removeStorageSync(STORAGE_KEYS.TOKEN_EXPIRES_AT)\r\n    console.log('ğŸ—‘ï¸ Tokenå·²æ¸…é™¤')\r\n  }\r\n  \r\n  /**\r\n   * è§£æè¿‡æœŸæ—¶é—´å­—ç¬¦ä¸²ä¸ºæ¯«ç§’æ•°\r\n   * @param {string} expiresIn - è¿‡æœŸæ—¶é—´å­—ç¬¦ä¸²ï¼ˆå¦‚\"2h\", \"7d\"ï¼‰\r\n   * @returns {number} æ¯«ç§’æ•°\r\n   */\r\n  static parseExpiresIn(expiresIn) {\r\n    const unit = expiresIn.slice(-1)\r\n    const value = parseInt(expiresIn.slice(0, -1))\r\n    \r\n    switch (unit) {\r\n      case 's': return value * 1000\r\n      case 'm': return value * 60 * 1000\r\n      case 'h': return value * 60 * 60 * 1000\r\n      case 'd': return value * 24 * 60 * 60 * 1000\r\n      default: return 2 * 60 * 60 * 1000 // é»˜è®¤2å°æ—¶\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * ç”¨æˆ·ä¿¡æ¯ç®¡ç†å·¥å…·\r\n */\r\nexport class UserManager {\r\n  /**\r\n   * ä¿å­˜ç”¨æˆ·ä¿¡æ¯\r\n   * @param {Object} userInfo - ç”¨æˆ·ä¿¡æ¯\r\n   */\r\n  static setUserInfo(userInfo) {\r\n    uni.setStorageSync(STORAGE_KEYS.USER_INFO, userInfo)\r\n    console.log('ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯å·²æ›´æ–°', userInfo)\r\n  }\r\n  \r\n  /**\r\n   * è·å–ç”¨æˆ·ä¿¡æ¯\r\n   * @returns {Object|null} ç”¨æˆ·ä¿¡æ¯\r\n   */\r\n  static getUserInfo() {\r\n    return uni.getStorageSync(STORAGE_KEYS.USER_INFO) || null\r\n  }\r\n  \r\n  /**\r\n   * æ¸…é™¤ç”¨æˆ·ä¿¡æ¯\r\n   */\r\n  static clearUserInfo() {\r\n    uni.removeStorageSync(STORAGE_KEYS.USER_INFO)\r\n    console.log('ğŸ—‘ï¸ ç”¨æˆ·ä¿¡æ¯å·²æ¸…é™¤')\r\n  }\r\n  \r\n  /**\r\n   * æ£€æŸ¥æ˜¯å¦æ˜¯ç®¡ç†å‘˜\r\n   * @returns {boolean} æ˜¯å¦æ˜¯ç®¡ç†å‘˜\r\n   */\r\n  static isAdmin() {\r\n    const userInfo = this.getUserInfo()\r\n    return userInfo && userInfo.role_id === 1\r\n  }\r\n  \r\n  /**\r\n   * æ£€æŸ¥ç”¨æˆ·çŠ¶æ€æ˜¯å¦æ­£å¸¸\r\n   * @returns {boolean} ç”¨æˆ·çŠ¶æ€æ˜¯å¦æ­£å¸¸\r\n   */\r\n  static isUserActive() {\r\n    const userInfo = this.getUserInfo()\r\n    return userInfo && userInfo.status === 1\r\n  }\r\n}\r\n\r\n/**\r\n * å¾®ä¿¡ç™»å½•å·¥å…·\r\n */\r\nexport class WechatAuth {\r\n  // å†…éƒ¨å˜é‡ï¼šè®°å½•æœ€åä¸€æ¬¡è·å–çš„codeï¼Œé¿å…é‡å¤ä½¿ç”¨\r\n  static _lastCode = null\r\n  static _codeTimestamp = 0\r\n  \r\n  /**\r\n   * è·å–å¾®ä¿¡ç™»å½•Code\r\n   * @param {boolean} forceRefresh - å¼ºåˆ¶åˆ·æ–°codeï¼Œå³ä½¿åˆšåˆšè·å–è¿‡\r\n   * @returns {Promise<string>} å¾®ä¿¡ç™»å½•Code\r\n   */\r\n  static getWechatCode(forceRefresh = false) {\r\n    return new Promise((resolve, reject) => {\r\n      const now = Date.now()\r\n      \r\n      // å¦‚æœä¸å¼ºåˆ¶åˆ·æ–°ä¸”è·ç¦»ä¸Šæ¬¡è·å–codeä¸åˆ°2ç§’ï¼Œç›´æ¥æ‹’ç»ï¼ˆé˜²æ­¢é‡å¤è·å–ï¼‰\r\n      if (!forceRefresh && this._lastCode && (now - this._codeTimestamp) < 2000) {\r\n        console.warn('âš ï¸ è·å–codeè¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åé‡è¯•')\r\n        reject(new Error('è·å–æˆæƒè¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åé‡è¯•'))\r\n        return\r\n      }\r\n      \r\n      console.log('ğŸ” å¼€å§‹è·å–å…¨æ–°çš„å¾®ä¿¡Code...')\r\n      \r\n      uni.login({\r\n        provider: 'weixin',\r\n        onlyAuthorize: true,\r\n        success: (res) => {\r\n          console.log('ğŸ” è·å–æˆåŠŸ', res)\r\n          if (!res.code) {\r\n            console.error('âŒ å¾®ä¿¡è¿”å›çš„codeä¸ºç©º')\r\n            reject(new Error('å¾®ä¿¡æˆæƒå¤±è´¥ï¼Œè¯·é‡è¯•'))\r\n            return\r\n          }\r\n          \r\n          // æ£€æŸ¥æ˜¯å¦ä¸ä¸Šæ¬¡codeç›¸åŒï¼ˆä¸åº”è¯¥å‘ç”Ÿï¼Œä½†å¢åŠ ä¿æŠ¤ï¼‰\r\n          if (!forceRefresh && res.code === this._lastCode) {\r\n            console.warn('âš ï¸ è·å–åˆ°é‡å¤çš„å¾®ä¿¡codeï¼Œå¼ºåˆ¶é‡æ–°è·å–')\r\n            // é€’å½’è°ƒç”¨ï¼Œå¼ºåˆ¶åˆ·æ–°\r\n            setTimeout(() => {\r\n              this.getWechatCode(true).then(resolve).catch(reject)\r\n            }, 500)\r\n            return\r\n          }\r\n          \r\n          // è®°å½•æ–°çš„codeå’Œæ—¶é—´æˆ³\r\n          this._lastCode = res.code\r\n          this._codeTimestamp = now\r\n          \r\n          console.log('âœ… è·å–å¾®ä¿¡CodeæˆåŠŸ', {\r\n            code: res.code.substring(0, 8) + '...',\r\n            timestamp: new Date(now).toLocaleTimeString()\r\n          })\r\n          \r\n          resolve(res.code)\r\n        },\r\n        fail: (err) => {\r\n          console.error('âŒ è·å–å¾®ä¿¡Codeå¤±è´¥', err)\r\n          reject(new Error(err.errMsg || 'è·å–å¾®ä¿¡æˆæƒå¤±è´¥ï¼Œè¯·é‡è¯•'))\r\n        }\r\n      })\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * æ¸…é™¤ç¼“å­˜çš„codeä¿¡æ¯ï¼ˆåœ¨ç™»å½•å¤±è´¥æ—¶è°ƒç”¨ï¼‰\r\n   */\r\n  static clearCodeCache() {\r\n    console.log('ğŸ—‘ï¸ æ¸…é™¤å¾®ä¿¡codeç¼“å­˜')\r\n    this._lastCode = null\r\n    this._codeTimestamp = 0\r\n  }\r\n  \r\n  /**\r\n   * è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆéœ€è¦ç”¨æˆ·æˆæƒï¼‰\r\n   * @returns {Promise<Object>} ç”¨æˆ·ä¿¡æ¯\r\n   */\r\n  static getUserProfile() {\r\n    return new Promise((resolve, reject) => {\r\n      // #ifdef MP-WEIXIN\r\n      uni.getUserProfile({\r\n        desc: 'ç”¨äºå®Œå–„ä¸ªäººèµ„æ–™',\r\n        success: (res) => {\r\n          console.log('ğŸ‘¤ è·å–ç”¨æˆ·ä¿¡æ¯æˆåŠŸ', res.userInfo)\r\n          resolve({\r\n            encryptedData: res.encryptedData,\r\n            iv: res.iv,\r\n            signature: res.signature,\r\n            userInfo: res.userInfo\r\n          })\r\n        },\r\n        fail: (err) => {\r\n          console.error('âŒ ç”¨æˆ·å–æ¶ˆæˆæƒ', err)\r\n          reject(new Error('éœ€è¦æˆæƒæ‰èƒ½ä½¿ç”¨å®Œæ•´åŠŸèƒ½'))\r\n        }\r\n      })\r\n      // #endif\r\n      \r\n      // #ifndef MP-WEIXIN\r\n      // éå¾®ä¿¡å°ç¨‹åºç¯å¢ƒï¼Œè¿”å›æ¨¡æ‹Ÿæ•°æ®\r\n      resolve({\r\n        userInfo: {\r\n          nickName: 'æµ‹è¯•ç”¨æˆ·',\r\n          avatarUrl: '/static/avatar.png'\r\n        }\r\n      })\r\n      // #endif\r\n    })\r\n  }\r\n  \r\n  /**\r\n   * æ£€æŸ¥æ˜¯å¦æ”¯æŒå¾®ä¿¡ç™»å½•\r\n   * @returns {boolean} æ˜¯å¦æ”¯æŒ\r\n   */\r\n  static isWechatLoginSupported() {\r\n    // #ifdef MP-WEIXIN\r\n    return true\r\n    // #endif\r\n    \r\n    // #ifndef MP-WEIXIN\r\n    return false\r\n    // #endif\r\n  }\r\n}\r\n\r\n/**\r\n * ç™»å½•çŠ¶æ€ç®¡ç†\r\n */\r\nexport class LoginStateManager {\r\n  /**\r\n   * è®¾ç½®ç™»å½•çŠ¶æ€\r\n   * @param {boolean} isLoggedIn - æ˜¯å¦å·²ç™»å½•\r\n   */\r\n  static setLoginState(isLoggedIn) {\r\n    uni.setStorageSync(STORAGE_KEYS.LOGIN_STATE, isLoggedIn)\r\n  }\r\n  \r\n  /**\r\n   * è·å–ç™»å½•çŠ¶æ€\r\n   * @returns {boolean} æ˜¯å¦å·²ç™»å½•\r\n   */\r\n  static getLoginState() {\r\n    return uni.getStorageSync(STORAGE_KEYS.LOGIN_STATE) || false\r\n  }\r\n  \r\n  /**\r\n   * æ¸…é™¤ç™»å½•çŠ¶æ€\r\n   */\r\n  static clearLoginState() {\r\n    uni.removeStorageSync(STORAGE_KEYS.LOGIN_STATE)\r\n  }\r\n  \r\n  /**\r\n   * å®Œæ•´çš„ç™»å‡ºå¤„ç†\r\n   */\r\n  static logout() {\r\n    TokenManager.clearTokens()\r\n    UserManager.clearUserInfo()\r\n    this.clearLoginState()\r\n    console.log('ğŸšª ç”¨æˆ·å·²ç™»å‡º')\r\n  }\r\n}\r\n\r\n/**\r\n * è·¯ç”±å®ˆå«å·¥å…·\r\n */\r\nexport class RouteGuard {\r\n  // ä¸éœ€è¦ç™»å½•å°±èƒ½è®¿é—®çš„é¡µé¢åˆ—è¡¨ï¼ˆå…¬å¼€é¡µé¢ï¼‰\r\n  // é»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤äº†è¿™äº›é¡µé¢ï¼Œæ‰€æœ‰å…¶ä»–é¡µé¢éƒ½éœ€è¦ç™»å½•\r\n  static PUBLIC_ROUTES = [\r\n    '/pages/login/login'\r\n  ]\r\n  \r\n  /**\r\n   * æ£€æŸ¥é¡µé¢æ˜¯å¦éœ€è¦ç™»å½•æƒé™\r\n   * @param {string} path - é¡µé¢è·¯å¾„\r\n   * @returns {boolean} æ˜¯å¦éœ€è¦ç™»å½•\r\n   */\r\n  static isProtectedRoute(path) {\r\n    // é»˜è®¤æ‰€æœ‰é¡µé¢éƒ½éœ€è¦ç™»å½•ï¼Œé™¤éåœ¨å…¬å¼€é¡µé¢åˆ—è¡¨ä¸­\r\n    return !this.isPublicRoute(path)\r\n  }\r\n  \r\n  /**\r\n   * æ£€æŸ¥é¡µé¢æ˜¯å¦ä¸ºå…¬å¼€é¡µé¢\r\n   * @param {string} path - é¡µé¢è·¯å¾„\r\n   * @returns {boolean} æ˜¯å¦ä¸ºå…¬å¼€é¡µé¢\r\n   */\r\n  static isPublicRoute(path) {\r\n    return this.PUBLIC_ROUTES.some(route => path.startsWith(route))\r\n  }\r\n  \r\n  /**\r\n   * ä¿å­˜å½“å‰è·¯å¾„ï¼ˆç”¨äºç™»å½•åè·³è½¬ï¼‰\r\n   * @param {string} path - é¡µé¢è·¯å¾„\r\n   */\r\n  static saveReturnPath(path) {\r\n    uni.setStorageSync('return_path', path)\r\n  }\r\n  \r\n  /**\r\n   * è·å–å¹¶æ¸…é™¤è¿”å›è·¯å¾„\r\n   * @returns {string} è¿”å›è·¯å¾„\r\n   */\r\n  static getAndClearReturnPath() {\r\n    const path = uni.getStorageSync('return_path') || '/pages/index/index'\r\n    uni.removeStorageSync('return_path')\r\n    return path\r\n  }\r\n}\r\n\r\n/**\r\n * æƒé™æ£€æŸ¥å·¥å…·\r\n */\r\nexport class PermissionChecker {\r\n  /**\r\n   * æ£€æŸ¥æ˜¯å¦æœ‰è®¿é—®æƒé™\r\n   * @param {string} permission - æƒé™æ ‡è¯†\r\n   * @returns {boolean} æ˜¯å¦æœ‰æƒé™\r\n   */\r\n  static hasPermission(permission) {\r\n    const userInfo = UserManager.getUserInfo()\r\n    if (!userInfo) return false\r\n    \r\n    // ç®¡ç†å‘˜æ‹¥æœ‰æ‰€æœ‰æƒé™\r\n    if (userInfo.role_id === 1) return true\r\n    \r\n    // æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚å®ç°æƒé™æ£€æŸ¥é€»è¾‘\r\n    switch (permission) {\r\n      case 'file_upload':\r\n        return LoginStateManager.getLoginState()\r\n      case 'user_management':\r\n        return userInfo.role_id === 1\r\n      default:\r\n        return true\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * æ£€æŸ¥åŠŸèƒ½æ˜¯å¦å¯ç”¨\r\n   * @param {string} feature - åŠŸèƒ½æ ‡è¯†\r\n   * @returns {Object} æ£€æŸ¥ç»“æœ {available: boolean, message: string}\r\n   */\r\n  static checkFeatureAvailable(feature) {\r\n    const isLoggedIn = LoginStateManager.getLoginState()\r\n    const userInfo = UserManager.getUserInfo()\r\n    \r\n    switch (feature) {\r\n      case 'file_upload':\r\n        if (!isLoggedIn) {\r\n          return {\r\n            available: false,\r\n            message: 'è¯·å…ˆç™»å½•åå†ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½'\r\n          }\r\n        }\r\n        return { available: true, message: '' }\r\n        \r\n      case 'profile_management':\r\n        if (!isLoggedIn) {\r\n          return {\r\n            available: false,\r\n            message: 'è¯·å…ˆç™»å½•åå†æŸ¥çœ‹ä¸ªäººèµ„æ–™'\r\n          }\r\n        }\r\n        return { available: true, message: '' }\r\n        \r\n      case 'admin_functions':\r\n        if (!userInfo || userInfo.role_id !== 1) {\r\n          return {\r\n            available: false,\r\n            message: 'ä»…ç®¡ç†å‘˜å¯ä½¿ç”¨æ­¤åŠŸèƒ½'\r\n          }\r\n        }\r\n        return { available: true, message: '' }\r\n        \r\n      default:\r\n        return { available: true, message: '' }\r\n    }\r\n  }\r\n}\r\n"],"names":["uni","STORAGE_KEYS","API_CONFIG"],"mappings":"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"}