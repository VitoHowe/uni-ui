{
  "question": "进度保存与收藏/错词等状态是否需要后端 API？",
  "reason_for_deep_dive": "多单词书场景下仅靠本地缓存无法跨端同步，且用户需要跨设备延续练习进度。",
  "sources": [
    {
      "path": "学习进度API升级说明.md",
      "insight": "现有题库模块已经有用户进度 API（GET/POST `/api/user-progress/:bankId/chapters/:chapterId`），记录 user_id/bank_id/chapter_id、当前题号、完成数等。"
    },
    {
      "path": "pages/word-practice/word-practice.vue",
      "insight": "收藏/掌握/复习状态写入 `WORD_PRACTICE_PROGRESS` 本地存储，不含书籍维度，无法区分不同 book。"
    }
  ],
  "findings": [
    "后端已有可复用的进度表结构（user_study_progress）和 API 模式，可以平移到单词书模块，在 word 级别新增 book_id + word_id + status 字段。",
    "收藏/错词/已掌握应与书籍关联，否则切换书籍会造成数据混淆；因此建议向后端新增 `/api/word-books/:id/progress`（读/写）以及 `/api/word-books/:id/words/progress`（批量状态）接口。",
    "在前端实现上，需要抽象出 `progressService`：进入练习时拉取指定书籍的进度映射（bookId+wordId -> status），操作收藏/mastered/ review 时立即写入本地并触发节流上报。"
  ],
  "next_actions": [
    "在对后端支持文档中描述所需接口：`GET /api/word-books/:bookId/progress`、`POST /api/word-books/:bookId/progress`（payload 包含 favorites/review/mastered 集合或增量操作）、可选 `PATCH /api/word-words/:wordId/state`。",
    "前端准备 fallback：若接口暂缺，则使用 bookId 命名空间存储在 `WORD_PRACTICE_PROGRESS::<bookId>` 中，保持可扩展。"
  ],
  "status": "clarified"
}
