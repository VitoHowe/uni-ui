# Sequential Thinking — 2025-11-12

## 任务理解
- 需要把单词练习页改造成基于后端 `/api/word-books` 与 `/api/word-books/{id}/words` 的动态数据流。
- 页面要提供单词书选择入口，并在选择后进入练习流程。
- 收藏夹、错词、已掌握等功能需作为公共模块，且要记录单词来源和进度。
- 需保证组件化，避免单个 `.vue` 文件臃肿，并附带前后端交互说明文档。

## 技术方案初步评估
- 现有项目基于 Vue（推测 uni-app）。需要新增 API 封装层或复用现有请求工具，拉取书籍与词条。
- 需要状态管理（可能是 pinia/vuex 或页面内 store）以跟踪当前单词、进度、收藏/错词等，并将来源书籍 ID 混入记录。
- 需要抽离组件：例如 `WordBookSelector`、`PracticePanel`、`ProgressTracker` 等，主页面负责 orchestrate。
- 进度保存要与后端交互？若后端尚未提供，需要前端以本地存储或待提供 API 方案，并在文档中说明所需接口。

## 风险识别
- 后端接口若分页或返回整本，前端在移动端加载性能要考虑。
- 收藏/错词等数据结构需统一：需要区分书籍来源，避免旧数据冲突。
- 需要明确进度保存方案——若依赖后端，需要 API 规范；若本地缓存，要考虑多端同步问题。
- 组件拆分后需确保全局状态共享方式清晰，避免 props 层层传递导致复杂度。

## 实现步骤初稿
1. 阅读现有 `word-practice.vue` 以及相关常量、question/exam 组件，了解当前状态/交互。
2. 梳理需要的数据结构、状态、事件流，列出组件职责。
3. 基于 API 构建请求模块与数据层，支持书籍列表与词条加载。
4. 拆分组件并实现：选择器、练习内容、统计/操作条等。
5. 实现收藏/错词/掌握标记逻辑，包含来源与持久化方案。
6. 设计并实现进度保存机制，并与后端（若需要）接口文档对齐。
7. 编写必要的单元/冒烟测试或页面级自检脚本。
8. 输出对后端的支持文档，包含接口需求及字段说明。

## 开放问题
- 项目内是否已有统一的请求/存储工具？需要在上下文收集中确认。
- 测试框架与执行方式尚未了解，需要读取 package/test 脚本。
- 进度保存是本地还是需要后端？需要计划文档中明确建议。
