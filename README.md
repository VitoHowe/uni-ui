# 高级信息系统项目管理师学习小程序

## 项目简介

这是一个专为高级信息系统项目管理师考试打造的学习小程序，基于uniapp框架开发，支持微信小程序平台。

## 主要功能

### 🏠 首页
- 学习进度展示
- 考试倒计时
- 热门学习资料推荐
- 每日一题

### 📚 学习
- 知识点分章节学习
- 视频课程
- 学习笔记
- 学习计划制定

### 📝 题库
- 历年真题练习
- 模拟考试
- 专项训练
- 错题本
- 答题统计分析

### 👤 我的
- 个人学习档案
- 学习统计
- 设置中心
- 意见反馈

## 技术栈

- **框架**: uniapp (Vue3)
- **UI组件**: uni-ui
- **状态管理**: Pinia
- **样式**: SCSS
- **平台**: 微信小程序

## 项目结构

```
├── pages/                  # 页面文件
│   ├── index/              # 首页
│   ├── study/              # 学习页面
│   ├── question/           # 题库页面
│   └── profile/            # 我的页面
├── components/             # 自定义组件
│   ├── AppHeader.vue       # 通用头部组件
│   └── CustomTabBar.vue    # 自定义底部导航栏
├── stores/                 # 状态管理
├── static/                 # 静态资源
└── uni_modules/            # uni-ui组件库

```

## 开发说明

1. 使用HBuilderX进行开发
2. 支持微信小程序预览和发布
3. 使用自定义底部导航栏，支持uni-icons图标
4. 采用现代化UI设计风格

## 特色功能

### 🔐 严格的权限控制系统
- **登录保护**: 除登录页外，所有页面都需要登录访问
- **智能导航守卫**: 自动拦截未授权的页面访问
- **Tab切换保护**: 防止未登录时错误切换导航栏状态
- **自动重定向**: 应用启动时自动检查登录状态并引导用户
- **用户友好**: 提供清晰的登录提示和流畅的登录体验

### 🎨 自定义底部导航栏
- 使用uni-icons图标，无需额外图片资源
- 支持图标颜色动态切换
- 平滑的切换动画效果
- 适配安全区域
- 集成权限控制，智能处理受保护页面访问

### 🎯 图标配置
底部导航使用的uni-icons图标：
- **首页**: `home` - 房子图标
- **学习**: `book` - 书本图标  
- **题库**: `help` - 帮助/问题图标
- **我的**: `person` - 用户图标

### 🔄 导航逻辑
- 自动高亮当前页面对应的tab
- 支持页面间的无缝切换
- 保持导航状态同步

## 自定义组件说明

### CustomTabBar 组件
位置：`components/CustomTabBar.vue`

**Props**：
- `current`: 当前选中的tab索引（Number，默认0）

**Events**：
- `change`: tab切换时触发，参数为新的索引值

**使用方法**：
```vue
<CustomTabBar :current="0" @change="onTabChange" />
```

### AppHeader 组件
位置：`components/AppHeader.vue`

通用的页面头部组件，支持自定义标题和返回按钮。

## 权限控制系统

### 🛡️ 系统架构

本应用采用多层次的权限控制架构：

1. **路由守卫层**: 在页面跳转时进行权限检查
2. **Tab切换层**: 在底部导航切换时进行权限验证
3. **应用启动层**: 在应用启动时自动检查并引导用户登录

### 🔧 核心组件

#### RouteGuard (路由守卫)
```javascript
// 位置: utils/auth.js
// 默认所有页面都需要登录，除非在公开页面列表中
static PUBLIC_ROUTES = ['/pages/login/login']
```

#### NavigationGuard (导航守卫)
```javascript
// 位置: utils/navigationGuard.js
// 提供安全的页面跳转和权限检查
NavigationGuard.safeNavigate({ url, type: 'navigateTo' })
```

#### CustomTabBar (智能Tab栏)
```javascript
// 位置: components/CustomTabBar.vue
// 在切换Tab前进行权限检查，避免状态错乱
```

### 📋 权限控制流程

1. **应用启动**: 检查登录状态 → 未登录则跳转到登录页
2. **页面访问**: 路由守卫拦截 → 权限验证 → 允许/拒绝访问
3. **Tab切换**: 权限检查 → 通过则切换 → 失败则保持当前状态
4. **登录成功**: 自动跳转到用户原本想访问的页面

### ⚙️ 配置说明

要添加新的公开页面（不需要登录），请修改：
```javascript
// utils/auth.js
static PUBLIC_ROUTES = [
  '/pages/login/login',
  '/pages/your-new-public-page/page'  // 添加新的公开页面
]
```

## 更新日志

### v1.2.0 (2025-09-25)
- ✅ **重大升级**: 实现严格的登录权限控制
- ✅ 优化路由守卫逻辑：默认所有页面都需要登录（除登录页）
- ✅ 修复Tab切换权限控制问题：未登录时点击"稍后再说"不会错误切换tabbar状态
- ✅ 应用启动时自动检查登录状态，未登录用户自动跳转到登录页
- ✅ 完善认证状态管理和导航守卫机制
- ✅ 改进用户体验：登录提示更加友好，权限控制更加严格

### v1.1.0 (2025-09-22)
- ✅ 实现自定义底部导航栏
- ✅ 使用uni-icons图标替代图片
- ✅ 添加导航切换动画效果
- ✅ 优化页面布局适配导航栏

### v1.0.0 (2025-09-22)
- ✅ 项目初始化
- ✅ 创建四个主要页面（首页、学习、题库、我的）
- ✅ 配置底部导航栏
- ✅ 基础UI框架搭建

## 快速开始

1. **克隆项目**
```bash
git clone [项目地址]
```

2. **使用HBuilderX打开项目**

3. **运行到微信小程序**
   - 点击"运行" → "运行到小程序模拟器" → "微信开发者工具"

4. **预览效果**
   - 在微信开发者工具中查看四个tab页面
   - 测试底部导航的切换效果

## 注意事项

- 项目使用自定义底部导航栏，不依赖系统原生tabBar
- 所有uni-icons图标都是矢量图标，支持任意颜色和大小
- 页面底部需要预留120rpx空间给导航栏
- 支持安全区域适配，在有底部安全区的设备上正常显示

---

*注：本项目基于uni-ui组件库，所有UI组件无需手动引入，可直接使用。自定义导航栏使用uni-icons图标，具有更好的扩展性和维护性。* 